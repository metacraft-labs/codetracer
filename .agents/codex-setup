#!/usr/bin/env bash

echo "codetracer setup:"
echo $(git rev-parse HEAD)
echo ""

# TODO: research this in depth, not critical for db-backend itself for now 
# git submodule update --init --recursive

# cd src/db-backend
# cargo build
# cd ../..

apt-get update && apt-get install -y nix

echo "y\ny\ny\ny\n" > yyyy

nix develop .#devShells.x86_64-linux.default \
  --extra-experimental-features nix-command \
  --extra-experimental-features flakes \
  -c ./.agents/codex-setup-in-nix.sh < yyyy


