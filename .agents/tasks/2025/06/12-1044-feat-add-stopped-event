db-backend: Add support for 'stopped' event for the dap protocol so after we have initialized and started the DAP transport when we complete a move, we need to send a stopped message to continue with the backend data.
We have added an info! message with a TODO: in complete_move function in handler.rs when we need the event to be sent
Thread id should be always 1 in the stopped event for now. If is_main is true reason in stopped event should be 'entry', otherwise it should be 'step'. hitBreakpointsIds for now should be empty as later on we will add the logic for it.
allThreadsStopped should be true in the stopped event that is sent. Add a stopped event in the test cases after the configuration is done.
--- FOLLOW UP TASK ---
add handling for load-locals message that uses handler.load_locals() in dap server to send variables to the frontend

--- FOLLOW UP TASK ---
Please address any inline comments on the diff, as well as any additional instructions below.

The tup build fails with:
webpack 5.90.3 compiled successfully in 3460 ms
  • electron-builder  version=22.14.13 os=6.6.88
  • artifacts will be published if draft release exists  reason=CI detected
  • loaded configuration  file=package.json (build field)
  • electron-rebuild not required if you use electron-builder, please consider to remove excess dependency from devDependencies

To ensure your native dependencies are always matched electron version, simply add script "postinstall": "electron-builder install-app-deps" to your `package.json`
  ⨯ Cannot compute electron version from installed node modules - none of the possible electron modules are installed.
See https://github.com/electron-userland/electron-builder/issues/3984#issuecomment-504968246

While the nix build fails with:

codetracer-electron> Building electron application
codetracer-electron>   • electron-builder  version=22.14.13 os=6.6.88
codetracer-electron>   ⨯ Cannot find package.json in the /build/k8j7p1m6q8v7y3zgfk6ykg0js12jwwjq-source  failedTask=build stackTrace=Error: Cannot find package.json in the /build/k8j7p1m6q8v7y3zgfk6ykg0js12jwwjq-source
codetracer-electron>     at Packager.readProjectMetadataIfTwoPackageStructureOrPrepacked (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/app-builder-lib/src/packager.ts:410:11)
codetracer-electron>     at Packager.build (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/app-builder-lib/src/packager.ts:328:24)
codetracer-electron>     at Object.executeFinally (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/builder-util/src/promise.ts:12:14)
codetracer-electron> ┌───────────────────────────────────────────────────────────────┐
codetracer-electron> │             electron-builder update check failed              │
codetracer-electron> │              Try running with sudo or get access              │
codetracer-electron> │             to the local update config store via              │
codetracer-electron> │ sudo chown -R :root /homeless-shelter/.config │
codetracer-electron> └───────────────────────────────────────────────────────────────┘
note: keeping build directory '/tmp/nix-build-codetracer-electron.drv-1/build'
error: builder for '/nix/store/m7yll2zxgig4m4sl24bkscc01jrvd1d4-codetracer-electron.drv' failed with exit code 1;
       last 25 log lines:
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 9.1 MiB (javascript) 77.7 KiB (asset) 1070 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 688 KiB 139 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 68.4 KiB 56 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 359 KiB 32 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 5.84 KiB 6 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 2.89 KiB
       >   ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 64 bytes [built] [code generated]
       >   + 2 modules
       > modules by mime type image/svg+xml 3.17 KiB
       >   data:image/svg+xml;base64,PHN2ZyB3aWR0aD0i.. 1.59 KiB [built] [code generated]
       >   data:image/svg+xml;base64,PHN2ZyB3aWR0aD0i.. 1.59 KiB [built] [code generated]
       > + 14 modules
       > webpack 5.90.3 compiled successfully in 3450 ms
       > Building electron application
       >   • electron-builder  version=22.14.13 os=6.6.88
       >   ⨯ Cannot find package.json in the /build/k8j7p1m6q8v7y3zgfk6ykg0js12jwwjq-source  failedTask=build stackTrace=Error: Cannot find package.json in the /build/k8j7p1m6q8v7y3zgfk6ykg0js12jwwjq-source
       >     at Packager.readProjectMetadataIfTwoPackageStructureOrPrepacked (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/app-builder-lib/src/packager.ts:410:11)
       >     at Packager.build (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/app-builder-lib/src/packager.ts:328:24)
       >     at Object.executeFinally (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/builder-util/src/promise.ts:12:14)
       > ┌───────────────────────────────────────────────────────────────┐
       > │             electron-builder update check failed              │
       > │              Try running with sudo or get access              │
       > │             to the local update config store via              │
       > │ sudo chown -R :root /homeless-shelter/.config │
       > └───────────────────────────────────────────────────────────────┘
       For full logs, run:
         nix log /nix/store/m7yll2zxgig4m4sl24bkscc01jrvd1d4-codetracer-electron.drv
error: 1 dependencies of derivation '/nix/store/x1iddagn1wq22lbbb593mllksidaxfrp-codetracer.drv' failed to build
error: Recipe  failed on line 200 with exit code 1
Error: Process completed with exit code 1.

The appimage build also fails with:
~/codetracer/codetracer/node-packages ~/codetracer/codetracer
  • electron-builder  version=22.14.13 os=6.6.48
  • artifacts will be published if draft release exists  reason=CI detected
  • loaded configuration  file=package.json (build field)
  • electron-rebuild not required if you use electron-builder, please consider to remove excess dependency from devDependencies

To ensure your native dependencies are always matched electron version, simply add script "postinstall": "electron-builder install-app-deps" to your `package.json`
  ⨯ Cannot compute electron version from installed node modules - none of the possible electron modules are installed.
See https://github.com/electron-userland/electron-builder/issues/3984#issuecomment-504968246
Performing cleanup...
Error: Process completed with exit code 1.

--- FOLLOW UP TASK ---
Please address any inline comments on the diff, as well as any additional instructions below.

The tup build fails with:
webpack 5.90.3 compiled successfully in 3460 ms
  • electron-builder  version=22.14.13 os=6.6.88
  • artifacts will be published if draft release exists  reason=CI detected
  • loaded configuration  file=package.json ("build" field)
  • electron-rebuild not required if you use electron-builder, please consider to remove excess dependency from devDependencies

To ensure your native dependencies are always matched electron version, simply add script "postinstall": "electron-builder install-app-deps" to your `package.json`
  ⨯ Cannot compute electron version from installed node modules - none of the possible electron modules are installed.
See https://github.com/electron-userland/electron-builder/issues/3984#issuecomment-504968246

While the nix build fails with:

codetracer-electron> Building electron application
codetracer-electron>   • electron-builder  version=22.14.13 os=6.6.88
codetracer-electron>   ⨯ Cannot find package.json in the /build/k8j7p1m6q8v7y3zgfk6ykg0js12jwwjq-source  failedTask=build stackTrace=Error: Cannot find package.json in the /build/k8j7p1m6q8v7y3zgfk6ykg0js12jwwjq-source
codetracer-electron>     at Packager.readProjectMetadataIfTwoPackageStructureOrPrepacked (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/app-builder-lib/src/packager.ts:410:11)
codetracer-electron>     at Packager.build (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/app-builder-lib/src/packager.ts:328:24)
codetracer-electron>     at Object.executeFinally (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/builder-util/src/promise.ts:12:14)
codetracer-electron> ┌───────────────────────────────────────────────────────────────┐
codetracer-electron> │             electron-builder update check failed              │
codetracer-electron> │              Try running with sudo or get access              │
codetracer-electron> │             to the local update config store via              │
codetracer-electron> │ sudo chown -R $USER:$(id -gn $USER) /homeless-shelter/.config │
codetracer-electron> └───────────────────────────────────────────────────────────────┘
note: keeping build directory '/tmp/nix-build-codetracer-electron.drv-1/build'
error: builder for '/nix/store/m7yll2zxgig4m4sl24bkscc01jrvd1d4-codetracer-electron.drv' failed with exit code 1;
       last 25 log lines:
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 9.1 MiB (javascript) 77.7 KiB (asset) 1070 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 688 KiB 139 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 68.4 KiB 56 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 359 KiB 32 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 5.84 KiB 6 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 2.89 KiB
       >   ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 64 bytes [built] [code generated]
       >   + 2 modules
       > modules by mime type image/svg+xml 3.17 KiB
       >   data:image/svg+xml;base64,PHN2ZyB3aWR0aD0i.. 1.59 KiB [built] [code generated]
       >   data:image/svg+xml;base64,PHN2ZyB3aWR0aD0i.. 1.59 KiB [built] [code generated]
       > + 14 modules
       > webpack 5.90.3 compiled successfully in 3450 ms
       > Building electron application
       >   • electron-builder  version=22.14.13 os=6.6.88
       >   ⨯ Cannot find package.json in the /build/k8j7p1m6q8v7y3zgfk6ykg0js12jwwjq-source  failedTask=build stackTrace=Error: Cannot find package.json in the /build/k8j7p1m6q8v7y3zgfk6ykg0js12jwwjq-source
       >     at Packager.readProjectMetadataIfTwoPackageStructureOrPrepacked (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/app-builder-lib/src/packager.ts:410:11)
       >     at Packager.build (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/app-builder-lib/src/packager.ts:328:24)
       >     at Object.executeFinally (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/builder-util/src/promise.ts:12:14)
       > ┌───────────────────────────────────────────────────────────────┐
       > │             electron-builder update check failed              │
       > │              Try running with sudo or get access              │
       > │             to the local update config store via              │
       > │ sudo chown -R $USER:$(id -gn $USER) /homeless-shelter/.config │
       > └───────────────────────────────────────────────────────────────┘
       For full logs, run:
         nix log /nix/store/m7yll2zxgig4m4sl24bkscc01jrvd1d4-codetracer-electron.drv
error: 1 dependencies of derivation '/nix/store/x1iddagn1wq22lbbb593mllksidaxfrp-codetracer.drv' failed to build
error: Recipe `build-nix` failed on line 200 with exit code 1
Error: Process completed with exit code 1.

The appimage build also fails with:
~/codetracer/codetracer/node-packages ~/codetracer/codetracer
  • electron-builder  version=22.14.13 os=6.6.48
  • artifacts will be published if draft release exists  reason=CI detected
  • loaded configuration  file=package.json ("build" field)
  • electron-rebuild not required if you use electron-builder, please consider to remove excess dependency from devDependencies

To ensure your native dependencies are always matched electron version, simply add script "postinstall": "electron-builder install-app-deps" to your `package.json`
  ⨯ Cannot compute electron version from installed node modules - none of the possible electron modules are installed.
See https://github.com/electron-userland/electron-builder/issues/3984#issuecomment-504968246
Performing cleanup...
Error: Process completed with exit code 1.
--- FOLLOW UP TASK ---
now nix develop fails for almost every build or CI action with this error:
warning: unable to download 'https://metacraft-private-infrastructure.cachix.org/nix-cache-info': HTTP error 401

         response body:

         Binary cache metacraft-private-infrastructure doesn't exist or you're not authorized to access. Please check the name for typos and/or provide an auth token. Contact support on https://cachix.org if you're stuck!
building '/nix/store/zxb6x4wjaa11ajylmmfap514yz4i88qw-node-modules-derivation.drv'...
error: builder for '/nix/store/zxb6x4wjaa11ajylmmfap514yz4i88qw-node-modules-derivation.drv' failed with exit code 1;
       last 11 log lines:
       > Running phase: unpackPhase
       > unpacking source archive /nix/store/n9baalmzwn8hn2avqn63dn8whhpqvhhv-node-packages
       > source root is node-packages
       > Running phase: patchPhase
       > Running phase: updateAutotoolsGnuConfigScriptsPhase
       > Running phase: configurePhase
       > ➤ YN0000: · Yarn 4.5.0
       > ➤ YN0000: ┌ Resolution step
       > ➤ YN0080: │ electron@npm:^33.4.11: Request to 'https://registry.yarnpkg.com/electron' has been blocked because of your configuration settings
       > ➤ YN0000: └ Completed in 0s 440ms
       > ➤ YN0000: · Failed with errors in 0s 469ms
       For full logs, run:
         nix log /nix/store/zxb6x4wjaa11ajylmmfap514yz4i88qw-node-modules-derivation.drv
error: 1 dependencies of derivation '/nix/store/pxd1m285zqyj8chlm66zmb1yy6y2pz2v-nix-shell-env.drv' failed to build
--- FOLLOW UP TASK ---
Change the hash in yarn-project.nix from sha512-pqS9NJAVrEh/CN/7fXqzh7WAKXCH7Da2WX19wGQ4IYHCGrFPe/1ewvaHyAXTtjb/4uOwcFTjHgqgizEAqZabsQ== to sha512-mb3MNaaYGbZ1vAGNlV1R6GG1l/gRsVvJVGQxszzhipb+5qYFurkewFIUXY8sCOhEKXw7vB1pa4CnmY4f2EX5QA==
--- FOLLOW UP TASK ---
During the lint nix CI action I get this error:  __        __   _                            _        
\ \      / /__| | ___ ___  _ __ ___   ___  | |_ ___  
 \ \ /\ / / _ \ |/ __/ _ \| '_ ` _ \ / _ \ | __/ _ \ 
  \ V  V /  __/ | (_| (_) | | | | | |  __/ | || (_) |
   \_/\_/ \___|_|\___\___/|_| |_| |_|\___|  \__\___/ 
                                                     
  ____          _     _____                        
 / ___|___   __| | __|_   _| __ __ _  ___ ___ _ __ 
| |   / _ \ / _` |/ _ \| || '__/ _` |/ __/ _ \ '__|
| |__| (_) | (_| |  __/| || | | (_| | (_|  __/ |   
 \____\___/ \__,_|\___||_||_|  \__,_|\___\___|_|   
                                                   
 evaluating flake...
checking flake output 'devShells'...
checking derivation devShells.x86_64-linux.default...
derivation evaluated to /nix/store/14zgvnvzq8bwk15r891xn3d50sn47hhr-nix-shell.drv
checking derivation devShells.x86_64-linux.ci...
derivation evaluated to /nix/store/4vwh5h06pp56az4p7pmymbfk2z660a27-nix-shell.drv
checking flake output 'checks'...
checking flake output 'legacyPackages'...
checking flake output 'formatter'...
checking flake output 'overlays'...
checking flake output 'nixosModules'...
checking flake output 'nixosConfigurations'...
checking flake output 'packages'...
checking derivation packages.x86_64-linux.noir...
derivation evaluated to /nix/store/hln14m98mccim7njqgqwcishpaxsihjb-Noir.drv
checking derivation packages.x86_64-linux.wazero...
derivation evaluated to /nix/store/cwi3nqd3m095w599bwkal5gdaiqphb74-wazero.drv
checking derivation packages.x86_64-linux.default...
error:
       … while checking flake output 'packages'

       … while checking the derivation 'packages.x86_64-linux.default'

       … while calling the 'derivationStrict' builtin
         at <nix/derivation-internal.nix>:37:12:
           36|
           37|   strict = derivationStrict drvAttrs;
             |            ^
           38|

       (stack trace truncated; use '--show-trace' to show the full, detailed trace)

       error: Package ‘electron-33.4.11’ in /nix/store/drmc93qxnzzk5cp3b03ppkk95zw0fanb-source/pkgs/development/tools/electron/binary/generic.nix:43 is marked as insecure, refusing to evaluate.


       Known issues:
        - Electron version 33.4.11 is EOL

       You can install it anyway by allowing this package, using the
       following methods:

       a) To temporarily allow all insecure packages, you can use an environment
          variable for a single invocation of the nix tools:

            $ export NIXPKGS_ALLOW_INSECURE=1

          Note: When using `nix shell`, `nix build`, `nix develop`, etc with a flake,
                then pass `--impure` in order to allow use of environment variables.

       b) for `nixos-rebuild` you can add ‘electron-33.4.11’ to
          `nixpkgs.config.permittedInsecurePackages` in the configuration.nix,
          like so:

            {
              nixpkgs.config.permittedInsecurePackages = [
                "electron-33.4.11"
              ];
            }

       c) For `nix-env`, `nix-build`, `nix-shell` or any other Nix command you can add
          ‘electron-33.4.11’ to `permittedInsecurePackages` in
          ~/.config/nixpkgs/config.nix, like so:

            {
              permittedInsecurePackages = [
                "electron-33.4.11"
              ];
            }
Error: Process completed with exit code 1.
--- FOLLOW UP TASK ---
The action now works, but builds fail.

Nix build:
codetracer-electron> Building electron application
codetracer-electron>   • electron-builder  version=22.14.13 os=6.6.88
codetracer-electron>   • loaded configuration  file=package.json ("build" field)
codetracer-electron>   • writing effective config  file=node-packages/dist/builder-effective-config.yaml
codetracer-electron>   • skipped dependencies rebuild  reason=npmRebuild is set to false
codetracer-electron>   • packaging       platform=linux arch=x64 electron=33.4.11 appOutDir=node-packages/dist/linux-unpacked
codetracer-electron>   • copying Electron  source=/build/a1mklhdrdvbak9mdbcy3v9w3z46a3zw7-source/node-packages/node_modules/.bin destination=/build/a1mklhdrdvbak9mdbcy3v9w3z46a3zw7-source/node-packages/dist/linux-unpacked
codetracer-electron>   ⨯ Application entry file "index.js" in the "/build/a1mklhdrdvbak9mdbcy3v9w3z46a3zw7-source/node-packages/dist/linux-unpacked/resources/app.asar" does not exist. Seems like a wrong configuration.  failedTask=build stackTrace=Error: Application entry file "index.js" in the "/build/a1mklhdrdvbak9mdbcy3v9w3z46a3zw7-source/node-packages/dist/linux-unpacked/resources/app.asar" does not exist. Seems like a wrong configuration.
...
