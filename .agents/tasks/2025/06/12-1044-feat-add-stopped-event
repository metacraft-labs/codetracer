db-backend: Add support for 'stopped' event for the dap protocol so after we have initialized and started the DAP transport when we complete a move, we need to send a stopped message to continue with the backend data.
We have added an info! message with a TODO: in complete_move function in handler.rs when we need the event to be sent
Thread id should be always 1 in the stopped event for now. If is_main is true reason in stopped event should be 'entry', otherwise it should be 'step'. hitBreakpointsIds for now should be empty as later on we will add the logic for it.
allThreadsStopped should be true in the stopped event that is sent. Add a stopped event in the test cases after the configuration is done.
--- FOLLOW UP TASK ---
add handling for load-locals message that uses handler.load_locals() in dap server to send variables to the frontend

--- FOLLOW UP TASK ---
Please address any inline comments on the diff, as well as any additional instructions below.

The tup build fails with:
webpack 5.90.3 compiled successfully in 3460 ms
  • electron-builder  version=22.14.13 os=6.6.88
  • artifacts will be published if draft release exists  reason=CI detected
  • loaded configuration  file=package.json (build field)
  • electron-rebuild not required if you use electron-builder, please consider to remove excess dependency from devDependencies

To ensure your native dependencies are always matched electron version, simply add script "postinstall": "electron-builder install-app-deps" to your `package.json`
  ⨯ Cannot compute electron version from installed node modules - none of the possible electron modules are installed.
See https://github.com/electron-userland/electron-builder/issues/3984#issuecomment-504968246

While the nix build fails with:

codetracer-electron> Building electron application
codetracer-electron>   • electron-builder  version=22.14.13 os=6.6.88
codetracer-electron>   ⨯ Cannot find package.json in the /build/k8j7p1m6q8v7y3zgfk6ykg0js12jwwjq-source  failedTask=build stackTrace=Error: Cannot find package.json in the /build/k8j7p1m6q8v7y3zgfk6ykg0js12jwwjq-source
codetracer-electron>     at Packager.readProjectMetadataIfTwoPackageStructureOrPrepacked (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/app-builder-lib/src/packager.ts:410:11)
codetracer-electron>     at Packager.build (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/app-builder-lib/src/packager.ts:328:24)
codetracer-electron>     at Object.executeFinally (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/builder-util/src/promise.ts:12:14)
codetracer-electron> ┌───────────────────────────────────────────────────────────────┐
codetracer-electron> │             electron-builder update check failed              │
codetracer-electron> │              Try running with sudo or get access              │
codetracer-electron> │             to the local update config store via              │
codetracer-electron> │ sudo chown -R :root /homeless-shelter/.config │
codetracer-electron> └───────────────────────────────────────────────────────────────┘
note: keeping build directory '/tmp/nix-build-codetracer-electron.drv-1/build'
error: builder for '/nix/store/m7yll2zxgig4m4sl24bkscc01jrvd1d4-codetracer-electron.drv' failed with exit code 1;
       last 25 log lines:
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 9.1 MiB (javascript) 77.7 KiB (asset) 1070 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 688 KiB 139 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 68.4 KiB 56 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 359 KiB 32 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 5.84 KiB 6 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 2.89 KiB
       >   ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 64 bytes [built] [code generated]
       >   + 2 modules
       > modules by mime type image/svg+xml 3.17 KiB
       >   data:image/svg+xml;base64,PHN2ZyB3aWR0aD0i.. 1.59 KiB [built] [code generated]
       >   data:image/svg+xml;base64,PHN2ZyB3aWR0aD0i.. 1.59 KiB [built] [code generated]
       > + 14 modules
       > webpack 5.90.3 compiled successfully in 3450 ms
       > Building electron application
       >   • electron-builder  version=22.14.13 os=6.6.88
       >   ⨯ Cannot find package.json in the /build/k8j7p1m6q8v7y3zgfk6ykg0js12jwwjq-source  failedTask=build stackTrace=Error: Cannot find package.json in the /build/k8j7p1m6q8v7y3zgfk6ykg0js12jwwjq-source
       >     at Packager.readProjectMetadataIfTwoPackageStructureOrPrepacked (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/app-builder-lib/src/packager.ts:410:11)
       >     at Packager.build (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/app-builder-lib/src/packager.ts:328:24)
       >     at Object.executeFinally (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/builder-util/src/promise.ts:12:14)
       > ┌───────────────────────────────────────────────────────────────┐
       > │             electron-builder update check failed              │
       > │              Try running with sudo or get access              │
       > │             to the local update config store via              │
       > │ sudo chown -R :root /homeless-shelter/.config │
       > └───────────────────────────────────────────────────────────────┘
       For full logs, run:
         nix log /nix/store/m7yll2zxgig4m4sl24bkscc01jrvd1d4-codetracer-electron.drv
error: 1 dependencies of derivation '/nix/store/x1iddagn1wq22lbbb593mllksidaxfrp-codetracer.drv' failed to build
error: Recipe  failed on line 200 with exit code 1
Error: Process completed with exit code 1.

The appimage build also fails with:
~/codetracer/codetracer/node-packages ~/codetracer/codetracer
  • electron-builder  version=22.14.13 os=6.6.48
  • artifacts will be published if draft release exists  reason=CI detected
  • loaded configuration  file=package.json (build field)
  • electron-rebuild not required if you use electron-builder, please consider to remove excess dependency from devDependencies

To ensure your native dependencies are always matched electron version, simply add script "postinstall": "electron-builder install-app-deps" to your `package.json`
  ⨯ Cannot compute electron version from installed node modules - none of the possible electron modules are installed.
See https://github.com/electron-userland/electron-builder/issues/3984#issuecomment-504968246
Performing cleanup...
Error: Process completed with exit code 1.

--- FOLLOW UP TASK ---
Please address any inline comments on the diff, as well as any additional instructions below.

The tup build fails with:
webpack 5.90.3 compiled successfully in 3460 ms
  • electron-builder  version=22.14.13 os=6.6.88
  • artifacts will be published if draft release exists  reason=CI detected
  • loaded configuration  file=package.json ("build" field)
  • electron-rebuild not required if you use electron-builder, please consider to remove excess dependency from devDependencies

To ensure your native dependencies are always matched electron version, simply add script "postinstall": "electron-builder install-app-deps" to your `package.json`
  ⨯ Cannot compute electron version from installed node modules - none of the possible electron modules are installed.
See https://github.com/electron-userland/electron-builder/issues/3984#issuecomment-504968246

While the nix build fails with:

codetracer-electron> Building electron application
codetracer-electron>   • electron-builder  version=22.14.13 os=6.6.88
codetracer-electron>   ⨯ Cannot find package.json in the /build/k8j7p1m6q8v7y3zgfk6ykg0js12jwwjq-source  failedTask=build stackTrace=Error: Cannot find package.json in the /build/k8j7p1m6q8v7y3zgfk6ykg0js12jwwjq-source
codetracer-electron>     at Packager.readProjectMetadataIfTwoPackageStructureOrPrepacked (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/app-builder-lib/src/packager.ts:410:11)
codetracer-electron>     at Packager.build (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/app-builder-lib/src/packager.ts:328:24)
codetracer-electron>     at Object.executeFinally (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/builder-util/src/promise.ts:12:14)
codetracer-electron> ┌───────────────────────────────────────────────────────────────┐
codetracer-electron> │             electron-builder update check failed              │
codetracer-electron> │              Try running with sudo or get access              │
codetracer-electron> │             to the local update config store via              │
codetracer-electron> │ sudo chown -R $USER:$(id -gn $USER) /homeless-shelter/.config │
codetracer-electron> └───────────────────────────────────────────────────────────────┘
note: keeping build directory '/tmp/nix-build-codetracer-electron.drv-1/build'
error: builder for '/nix/store/m7yll2zxgig4m4sl24bkscc01jrvd1d4-codetracer-electron.drv' failed with exit code 1;
       last 25 log lines:
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 9.1 MiB (javascript) 77.7 KiB (asset) 1070 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 688 KiB 139 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 68.4 KiB 56 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 359 KiB 32 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 5.84 KiB 6 modules
       > modules by path ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 2.89 KiB
       >   ../../nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec...(truncated) 64 bytes [built] [code generated]
       >   + 2 modules
       > modules by mime type image/svg+xml 3.17 KiB
       >   data:image/svg+xml;base64,PHN2ZyB3aWR0aD0i.. 1.59 KiB [built] [code generated]
       >   data:image/svg+xml;base64,PHN2ZyB3aWR0aD0i.. 1.59 KiB [built] [code generated]
       > + 14 modules
       > webpack 5.90.3 compiled successfully in 3450 ms
       > Building electron application
       >   • electron-builder  version=22.14.13 os=6.6.88
       >   ⨯ Cannot find package.json in the /build/k8j7p1m6q8v7y3zgfk6ykg0js12jwwjq-source  failedTask=build stackTrace=Error: Cannot find package.json in the /build/k8j7p1m6q8v7y3zgfk6ykg0js12jwwjq-source
       >     at Packager.readProjectMetadataIfTwoPackageStructureOrPrepacked (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/app-builder-lib/src/packager.ts:410:11)
       >     at Packager.build (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/app-builder-lib/src/packager.ts:328:24)
       >     at Object.executeFinally (/nix/store/b5m8z1wxz1f32qa42qzf7gc0jqxx6fim-node-modules-derivation/libexec/node-modules-derivation/node_modules/builder-util/src/promise.ts:12:14)
       > ┌───────────────────────────────────────────────────────────────┐
       > │             electron-builder update check failed              │
       > │              Try running with sudo or get access              │
       > │             to the local update config store via              │
       > │ sudo chown -R $USER:$(id -gn $USER) /homeless-shelter/.config │
       > └───────────────────────────────────────────────────────────────┘
       For full logs, run:
         nix log /nix/store/m7yll2zxgig4m4sl24bkscc01jrvd1d4-codetracer-electron.drv
error: 1 dependencies of derivation '/nix/store/x1iddagn1wq22lbbb593mllksidaxfrp-codetracer.drv' failed to build
error: Recipe `build-nix` failed on line 200 with exit code 1
Error: Process completed with exit code 1.

The appimage build also fails with:
~/codetracer/codetracer/node-packages ~/codetracer/codetracer
  • electron-builder  version=22.14.13 os=6.6.48
  • artifacts will be published if draft release exists  reason=CI detected
  • loaded configuration  file=package.json ("build" field)
  • electron-rebuild not required if you use electron-builder, please consider to remove excess dependency from devDependencies

To ensure your native dependencies are always matched electron version, simply add script "postinstall": "electron-builder install-app-deps" to your `package.json`
  ⨯ Cannot compute electron version from installed node modules - none of the possible electron modules are installed.
See https://github.com/electron-userland/electron-builder/issues/3984#issuecomment-504968246
Performing cleanup...
Error: Process completed with exit code 1.