# shellcheck shell=bash

# Common Nim flags shared across all Codetracer builds.
CODERACER_NIM_COMMON_FLAGS=(
  "-d:asyncBackend=asyncdispatch"
  "-d:chronicles_sinks=json"
  "-d:chronicles_line_numbers=true"
  "-d:chronicles_timestamps=UnixTime"
  "-d:ssl"
  "--gc:refc"
  "--hints:off"
  "--warnings:off"
  "--hint[Processing]:off"
  "--hint[Conf]:off"
  "--hint[CC]:off"
  "--hint[Pattern]:off"
  "--hint[XDeclaredButNotUsed]:off"
  "--hint[XCannotRaiseY]:off"
  "--warning[CaseTransition]:off"
)

# Profile-specific additions layered on top of the common flags.
CODERACER_NIM_PROFILE_DEBUG_FLAGS=(
  "-d:debug"
  "--debugInfo"
  "--lineDir:on"
  "--stacktrace:on"
  "--linetrace:on"
)

CODERACER_NIM_PROFILE_RELEASE_FLAGS=(
  "-d:release"
  "--lineDir:on"
  "--stacktrace:on"
  "--linetrace:on"
)

# Shared flags for Nim binaries (ct, db-backend-record, etc.).
CODERACER_NIM_BINARY_SHARED_FLAGS=(
  "--boundChecks:on"
  "--warnings:on"
  "--hints:on"
  "-d:ctTest"
  "-d:testing"
  "-d:useOpenssl3"
)

# Shared flags for Nim -> JS builds. Specific targets layer on top of these.
CODERACER_NIM_JS_SHARED_FLAGS=(
  "--hints:off"
  "--warnings:off"
)
