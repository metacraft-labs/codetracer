#!/usr/bin/env bash
# Execute a command with Rust 1.75 in PATH
# Usage: with-rust-1.75 <command> [args...]
#
# Example:
#   with-rust-1.75 rustc --version
#   with-rust-1.75 cargo test test_rust_flow

set -e

if [ $# -eq 0 ]; then
	echo "Usage: with-rust-1.75 <command> [args...]"
	echo "Execute a command with Rust 1.75 in PATH"
	exit 1
fi

RUST_PATH=$(nix build --no-link --print-out-paths '.#rust-1_75')/bin
export PATH="$RUST_PATH:$PATH"

exec "$@"
