/* Generated by the Nim Compiler v1.6.20 */
var framePtr = null;
var excHandler = 0;
var lastJSError = null;
var NTI822083626 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI822084603 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI536870973 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI822083625 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI1040187395 = {size: 0,kind: 31,base: null,node: null,finalizer: null};
var NTI822083642 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI822083639 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI822083636 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI33554466 = {size: 0,kind: 1,base: null,node: null,finalizer: null};
var NTI33555191 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI1006633041 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI1006633033 = {size: 0, kind: 22, base: null, node: null, finalizer: null};
var NTI822083628 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI822083627 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI671088712 = {size: 0,kind: 31,base: null,node: null,finalizer: null};
var NTI671088719 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI33555129 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI33555124 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI486539711 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI469762342 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI33555127 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI33554456 = {size: 0,kind: 31,base: null,node: null,finalizer: null};
var NTI1509949447 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI33555117 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI33555128 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI33555131 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI33555123 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI33555125 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI33555086 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI33555168 = {size: 0, kind: 22, base: null, node: null, finalizer: null};
var NTI33554439 = {size: 0,kind: 28,base: null,node: null,finalizer: null};
var NTI33554440 = {size: 0,kind: 29,base: null,node: null,finalizer: null};
var NTI33555167 = {size: 0, kind: 22, base: null, node: null, finalizer: null};
var NTI33555115 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI33555116 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI33555133 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NNI33555133 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI33555133.node = NNI33555133;
var NNI33555116 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI33555116.node = NNI33555116;
NTI33555167.base = NTI33555115;
NTI33555168.base = NTI33555115;
var NNI33555115 = {kind: 2, len: 5, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "parent", len: 0, typ: NTI33555167, name: "parent", sons: null},
{kind: 1, offset: "name", len: 0, typ: NTI33554440, name: "name", sons: null},
{kind: 1, offset: "message", len: 0, typ: NTI33554439, name: "msg", sons: null},
{kind: 1, offset: "trace", len: 0, typ: NTI33554439, name: "trace", sons: null},
{kind: 1, offset: "up", len: 0, typ: NTI33555168, name: "up", sons: null}]};
NTI33555115.node = NNI33555115;
var NNI33555086 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI33555086.node = NNI33555086;
NTI33555115.base = NTI33555086;
NTI33555116.base = NTI33555115;
NTI33555133.base = NTI33555116;
var NNI33555125 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI33555125.node = NNI33555125;
var NNI33555123 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI33555123.node = NNI33555123;
NTI33555123.base = NTI33555116;
NTI33555125.base = NTI33555123;
var NNI33555131 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI33555131.node = NNI33555131;
NTI33555131.base = NTI33555116;
var NNI33555128 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI33555128.node = NNI33555128;
var NNI33555117 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI33555117.node = NNI33555117;
NTI33555117.base = NTI33555115;
NTI33555128.base = NTI33555117;
var NNI1509949447 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI33554456, name: "Field0", sons: null},
{kind: 1, offset: "Field1", len: 0, typ: NTI33554456, name: "Field1", sons: null}]};
NTI1509949447.node = NNI1509949447;
var NNI33555127 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI33555127.node = NNI33555127;
NTI33555127.base = NTI33555116;
NTI469762342.base = NTI33554439;
NTI486539711.base = NTI33554439;
var NNI33555124 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI33555124.node = NNI33555124;
NTI33555124.base = NTI33555123;
var NNI33555129 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI33555129.node = NNI33555129;
NTI33555129.base = NTI33555128;
var NNI671088719 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "a", len: 0, typ: NTI671088712, name: "a", sons: null},
{kind: 1, offset: "b", len: 0, typ: NTI33554456, name: "b", sons: null}]};
NTI671088719.node = NNI671088719;
var NNI1006633041 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI1006633041.node = NNI1006633041;
var NNI33555191 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI33555191.node = NNI33555191;
NTI33555191.base = NTI33555086;
NTI1006633041.base = NTI33555191;
NTI1006633033.base = NTI1006633041;
NTI822083628.base = NTI1006633033;
var NNI822083625 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "path", len: 0, typ: NTI33554440, name: "path", sons: null},
{kind: 1, offset: "content", len: 0, typ: NTI33554440, name: "content", sons: null}]};
NTI822083625.node = NNI822083625;
var NNI822083642 = {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI1040187395, name: "Field0", sons: null},
{kind: 1, offset: "Field1", len: 0, typ: NTI33554440, name: "Field1", sons: null},
{kind: 1, offset: "Field2", len: 0, typ: NTI822083625, name: "Field2", sons: null}]};
NTI822083642.node = NNI822083642;
NTI822083639.base = NTI822083642;
var NNI822083636 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "data", len: 0, typ: NTI822083639, name: "data", sons: null},
{kind: 1, offset: "counter", len: 0, typ: NTI33554456, name: "counter", sons: null}]};
NTI822083636.node = NNI822083636;
var NNI822083627 = {kind: 2, len: 5, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "currentMessageId", len: 0, typ: NTI33554440, name: "currentMessageId", sons: null},
{kind: 1, offset: "aggregatedContent", len: 0, typ: NTI33554440, name: "aggregatedContent", sons: null},
{kind: 1, offset: "collectedUpdates", len: 0, typ: NTI822083628, name: "collectedUpdates", sons: null},
{kind: 1, offset: "activePrompt", len: 0, typ: NTI33554466, name: "activePrompt", sons: null},
{kind: 1, offset: "toolPreImages", len: 0, typ: NTI822083636, name: "toolPreImages", sons: null}]};
NTI822083627.node = NNI822083627;
var NNI536870973 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "a", len: 0, typ: NTI33554456, name: "a", sons: null},
{kind: 1, offset: "b", len: 0, typ: NTI33554456, name: "b", sons: null}]};
NTI536870973.node = NNI536870973;
var NNI822083626 = {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "path", len: 0, typ: NTI33554440, name: "path", sons: null},
{kind: 1, offset: "oldText", len: 0, typ: NTI33554440, name: "oldText", sons: null},
{kind: 1, offset: "newText", len: 0, typ: NTI33554440, name: "newText", sons: null}]};
NTI822083626.node = NNI822083626;
NTI822084603.base = NTI822083626;

function makeNimstrLit(c_33556801) {
      var result = [];
  for (var i = 0; i < c_33556801.length; ++i) {
    result[i] = c_33556801.charCodeAt(i);
  }
  return result;



}

function mnewString(len_33556893) {
        return new Array(len_33556893);



}

function toJSStr(s_33556807) {
                    var Temporary5;

  var result_33556808 = null;

    var res_33556842 = newSeq_33556825((s_33556807).length);
    var i_33556843 = 0;
    var j_33556844 = 0;
    Label1: do {
        Label2: while (true) {
        if (!(i_33556843 < (s_33556807).length)) break Label2;
          var c_33556845 = s_33556807[i_33556843];
          if ((c_33556845 < 128)) {
          res_33556842[j_33556844] = String.fromCharCode(c_33556845);
          i_33556843 += 1;
          }
          else {
            var helper_33556857 = newSeq_33556825(0);
            Label3: do {
                Label4: while (true) {
                if (!true) break Label4;
                  var code_33556858 = c_33556845.toString(16);
                  if ((((code_33556858) == null ? 0 : (code_33556858).length) == 1)) {
                  helper_33556857.push("%0");;
                  }
                  else {
                  helper_33556857.push("%");;
                  }

                  helper_33556857.push(code_33556858);;
                  i_33556843 += 1;
                    if (((s_33556807).length <= i_33556843)) Temporary5 = true; else {                      Temporary5 = (s_33556807[i_33556843] < 128);                    }                  if (Temporary5) {
                  break Label3;
                  }

                  c_33556845 = s_33556807[i_33556843];
                }
            } while (false);
++excHandler;
            try {
            res_33556842[j_33556844] = decodeURIComponent(helper_33556857.join(""));
--excHandler;
} catch (EXCEPTION) {
 var prevJSError = lastJSError;
 lastJSError = EXCEPTION;
 --excHandler;
            res_33556842[j_33556844] = helper_33556857.join("");
            lastJSError = prevJSError;
            } finally {
            }
          }

          j_33556844 += 1;
        }
    } while (false);
    if (res_33556842.length < j_33556844) { for (var i = res_33556842.length ; i < j_33556844 ; ++i) res_33556842.push(null); }
               else { res_33556842.length = j_33556844; };
    result_33556808 = res_33556842.join("");

  return result_33556808;

}

function raiseException(e_33556667, ename_33556668) {
    e_33556667.name = ename_33556668;
    if ((excHandler == 0)) {
    unhandledException(e_33556667);
    }

    throw e_33556667;


}

function chckRange(i_33557189, a_33557190, b_33557191) {
      var Temporary1;

  var result_33557192 = 0;

  BeforeRet: do {
      if (!(a_33557190 <= i_33557189)) Temporary1 = false; else {        Temporary1 = (i_33557189 <= b_33557191);      }    if (Temporary1) {
    result_33557192 = i_33557189;
    break BeforeRet;
    }
    else {
    raiseRangeError();
    }

  } while (false);

  return result_33557192;

}

function setConstr() {
        var result = {};
    for (var i = 0; i < arguments.length; ++i) {
      var x = arguments[i];
      if (typeof(x) == "object") {
        for (var j = x[0]; j <= x[1]; ++j) {
          result[j] = true;
        }
      } else {
        result[x] = true;
      }
    }
    return result;



}
var ConstSet1 = setConstr(17, 16, 4, 18, 27, 19, 23, 22, 21);

function nimCopy(dest_33557140, src_33557141, ti_33557142) {
  var result_33557151 = null;

    switch (ti_33557142.kind) {
    case 21:
    case 22:
    case 23:
    case 5:
      if (!(isFatPointer_33557131(ti_33557142))) {
      result_33557151 = src_33557141;
      }
      else {
        result_33557151 = [src_33557141[0], src_33557141[1]];
      }

      break;
    case 19:
            if (dest_33557140 === null || dest_33557140 === undefined) {
        dest_33557140 = {};
      }
      else {
        for (var key in dest_33557140) { delete dest_33557140[key]; }
      }
      for (var key in src_33557141) { dest_33557140[key] = src_33557141[key]; }
      result_33557151 = dest_33557140;

      break;
    case 18:
    case 17:
      if (!((ti_33557142.base == null))) {
      result_33557151 = nimCopy(dest_33557140, src_33557141, ti_33557142.base);
      }
      else {
      if ((ti_33557142.kind == 17)) {
      result_33557151 = (dest_33557140 === null || dest_33557140 === undefined) ? {m_type: ti_33557142} : dest_33557140;
      }
      else {
        result_33557151 = (dest_33557140 === null || dest_33557140 === undefined) ? {} : dest_33557140;
      }
      }
      nimCopyAux(result_33557151, src_33557141, ti_33557142.node);
      break;
    case 24:
    case 4:
    case 27:
    case 16:
            if (src_33557141 === null) {
        result_33557151 = null;
      }
      else {
        if (dest_33557140 === null || dest_33557140 === undefined || dest_33557140.length != src_33557141.length) {
          dest_33557140 = new Array(src_33557141.length);
        }
        result_33557151 = dest_33557140;
        for (var i = 0; i < src_33557141.length; ++i) {
          result_33557151[i] = nimCopy(result_33557151[i], src_33557141[i], ti_33557142.base);
        }
      }

      break;
    case 28:
            if (src_33557141 !== null) {
        result_33557151 = src_33557141.slice(0);
      }

      break;
    default:
      result_33557151 = src_33557141;
      break;
    }

  return result_33557151;

}

function addInt(a_33556940, b_33556941) {
        var result = a_33556940 + b_33556941;
    checkOverflowInt(result);
    return result;



}

function chckIndx(i_33557184, a_33557185, b_33557186) {
      var Temporary1;

  var result_33557187 = 0;

  BeforeRet: do {
      if (!(a_33557185 <= i_33557184)) Temporary1 = false; else {        Temporary1 = (i_33557184 <= b_33557186);      }    if (Temporary1) {
    result_33557187 = i_33557184;
    break BeforeRet;
    }
    else {
    raiseIndexError(i_33557184, a_33557185, b_33557186);
    }

  } while (false);

  return result_33557187;

}

function subInt(a_33556944, b_33556945) {
        var result = a_33556944 - b_33556945;
    checkOverflowInt(result);
    return result;



}
var ConstSet2 = setConstr([65, 90]);

function cstrToNimstr(c_33556804) {
      var ln = c_33556804.length;
  var result = new Array(ln);
  var r = 0;
  for (var i = 0; i < ln; ++i) {
    var ch = c_33556804.charCodeAt(i);

    if (ch < 128) {
      result[r] = ch;
    }
    else {
      if (ch < 2048) {
        result[r] = (ch >> 6) | 192;
      }
      else {
        if (ch < 55296 || ch >= 57344) {
          result[r] = (ch >> 12) | 224;
        }
        else {
            ++i;
            ch = 65536 + (((ch & 1023) << 10) | (c_33556804.charCodeAt(i) & 1023));
            result[r] = (ch >> 18) | 240;
            ++r;
            result[r] = ((ch >> 12) & 63) | 128;
        }
        ++r;
        result[r] = ((ch >> 6) & 63) | 128;
      }
      ++r;
      result[r] = (ch & 63) | 128;
    }
    ++r;
  }
  return result;



}

function eqStrings(a_33556931, b_33556932) {
        if (a_33556931 == b_33556932) return true;
    if (a_33556931 === null && b_33556932.length == 0) return true;
    if (b_33556932 === null && a_33556931.length == 0) return true;
    if ((!a_33556931) || (!b_33556932)) return false;
    var alen = a_33556931.length;
    if (alen != b_33556932.length) return false;
    for (var i = 0; i < alen; ++i)
      if (a_33556931[i] != b_33556932[i]) return false;
    return true;



}
var ConstSet3 = setConstr(47, 47);
var ConstSet4 = setConstr(47, 47);
var ConstSet5 = setConstr(47, 47);
var ConstSet6 = setConstr(47, 47);

function addChar(x_33557255, c_33557256) {
    x_33557255.push(c_33557256);


}
var ConstSet7 = setConstr(47, 47);
var ConstSet8 = setConstr(47, 47);
var ConstSet9 = setConstr(47, 47);
var ConstSet10 = setConstr(47, 47);
var ConstSet11 = setConstr(47, 47);
var ConstSet12 = setConstr(47, 47);
var ConstSet13 = setConstr(47, 47);
var ConstSet14 = setConstr(47, 47);

function nimMax(a_33556998, b_33556999) {
    var Temporary1;

  var result_33557000 = 0;

  BeforeRet: do {
    if ((b_33556999 <= a_33556998)) {
    Temporary1 = a_33556998;
    }
    else {
    Temporary1 = b_33556999;
    }

    result_33557000 = Temporary1;
    break BeforeRet;
  } while (false);

  return result_33557000;

}

function nimMin(a_33556994, b_33556995) {
    var Temporary1;

  var result_33556996 = 0;

  BeforeRet: do {
    if ((a_33556994 <= b_33556995)) {
    Temporary1 = a_33556994;
    }
    else {
    Temporary1 = b_33556995;
    }

    result_33556996 = Temporary1;
    break BeforeRet;
  } while (false);

  return result_33556996;

}
var ConstSet15 = setConstr(47, 47);
var ConstSet16 = setConstr(47, 47);
var ConstSet17 = setConstr(47, 47);
var ConstSet18 = setConstr(47, 47);

function divInt(a_33556952, b_33556953) {
        if (b_33556953 == 0) raiseDivByZero();
    if (b_33556953 == -1 && a_33556952 == 2147483647) raiseOverflow();
    return Math.trunc(a_33556952 / b_33556953);



}

function mulInt(a_33556948, b_33556949) {
        var result = a_33556948 * b_33556949;
    checkOverflowInt(result);
    return result;



}

function modInt(a_33556956, b_33556957) {
        if (b_33556957 == 0) raiseDivByZero();
    if (b_33556957 == -1 && a_33556956 == 2147483647) raiseOverflow();
    return Math.trunc(a_33556956 % b_33556957);



}
var ConstSet19 = setConstr(60, 62, 94);
var ConstSet20 = setConstr(60, 62, 94);
var ConstSet21 = setConstr(45, 43, 32);
var ConstSet22 = setConstr([48, 57]);
var ConstSet23 = setConstr([48, 57]);
var ConstSet24 = setConstr([48, 57]);
var ConstSet25 = setConstr([65, 90], [97, 122]);

function nimCharToStr(x_33556517) {
  var result_33556518 = [];

    result_33556518 = nimCopy(null, mnewString(1), NTI33554439);
    result_33556518[0] = x_33556517;

  return result_33556518;

}

function rawEcho() {
          var buf = "";
      for (var i = 0; i < arguments.length; ++i) {
        buf += toJSStr(arguments[i]);
      }
      console.log(buf);



}
var ConstSet26 = setConstr(13, 10);
var ConstSet27 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet28 = setConstr(32, 9, 11, 13, 10, 12);
if (!Math.trunc) {
  Math.trunc = function(v) {
    v = +v;
    if (!isFinite(v)) return v;
    return (v - v % 1) || (v < 0 ? -0 : v === 0 ? v : 0);
  };
}

var objectID_1040187554 = [0];
var svgNamespace_1241514235 = [makeNimstrLit("http://www.w3.org/2000/svg")];
var mathNamespace_1241514236 = [makeNimstrLit("http://www.w3.org/1998/Math/MathML")];
var gid_1241514613 = [0];
var jsNl_1207959824 = ["\n"];

function add_33556419(x_33556420, x_33556420_Idx, y_33556421) {
          if (x_33556420[x_33556420_Idx] === null) { x_33556420[x_33556420_Idx] = []; }
      var off = x_33556420[x_33556420_Idx].length;
      x_33556420[x_33556420_Idx].length += y_33556421.length;
      for (var i = 0; i < y_33556421.length; ++i) {
        x_33556420[x_33556420_Idx][off+i] = y_33556421.charCodeAt(i);
      }



}

function newSeq_33556825(len_33556827) {
  var result_33556828 = [];

    result_33556828 = new Array(len_33556827); for (var i = 0 ; i < len_33556827 ; ++i) { result_33556828[i] = null; }
  return result_33556828;

}

function unhandledException(e_33556663) {
    var buf_33556664 = [[]];
    if (!(((e_33556663.message).length == 0))) {
    buf_33556664[0].push.apply(buf_33556664[0], makeNimstrLit("Error: unhandled exception: "));;
    buf_33556664[0].push.apply(buf_33556664[0], e_33556663.message);;
    }
    else {
    buf_33556664[0].push.apply(buf_33556664[0], makeNimstrLit("Error: unhandled exception"));;
    }

    buf_33556664[0].push.apply(buf_33556664[0], makeNimstrLit(" ["));;
    add_33556419(buf_33556664, 0, e_33556663.name);
    buf_33556664[0].push.apply(buf_33556664[0], makeNimstrLit("]\x0A"));;
    var cbuf_33556665 = toJSStr(buf_33556664[0]);
      if (typeof(Error) !== "undefined") {
    throw new Error(cbuf_33556665);
  }
  else {
    throw cbuf_33556665;
  }



}

function raiseRangeError() {
    raiseException({message: makeNimstrLit("value out of range"), parent: null, m_type: NTI33555133, name: null, trace: [], up: null}, "RangeDefect");


}

function isFatPointer_33557131(ti_33557132) {
  var result_33557133 = false;

  BeforeRet: do {
    result_33557133 = !((ConstSet1[ti_33557132.base.kind] != undefined));
    break BeforeRet;
  } while (false);

  return result_33557133;

}

function nimCopyAux(dest_33557144, src_33557145, n_33557146) {
    switch (n_33557146.kind) {
    case 0:
      break;
    case 1:
            dest_33557144[n_33557146.offset] = nimCopy(dest_33557144[n_33557146.offset], src_33557145[n_33557146.offset], n_33557146.typ);

      break;
    case 2:
          for (var i = 0; i < n_33557146.sons.length; i++) {
      nimCopyAux(dest_33557144, src_33557145, n_33557146.sons[i]);
    }

      break;
    case 3:
            dest_33557144[n_33557146.offset] = nimCopy(dest_33557144[n_33557146.offset], src_33557145[n_33557146.offset], n_33557146.typ);
      for (var i = 0; i < n_33557146.sons.length; ++i) {
        nimCopyAux(dest_33557144, src_33557145, n_33557146.sons[i][1]);
      }

      break;
    }


}

function raiseOverflow() {
    raiseException({message: makeNimstrLit("over- or underflow"), parent: null, m_type: NTI33555125, name: null, trace: [], up: null}, "OverflowDefect");


}

function checkOverflowInt(a_33556938) {
        if (a_33556938 > 2147483647 || a_33556938 < -2147483648) raiseOverflow();



}

function addChars_251658415(result_251658417, result_251658417_Idx, x_251658418, start_251658419, n_251658420) {
    var old_251658421 = (result_251658417[result_251658417_Idx]).length;
    (result_251658417[result_251658417_Idx].length = chckRange(addInt(old_251658421, n_251658420), 0, 2147483647));
    Label1: do {
      var iHEX60gensym4_251658435 = 0;
      var i_1392509030 = 0;
      Label2: do {
          Label3: while (true) {
          if (!(i_1392509030 < n_251658420)) break Label3;
            iHEX60gensym4_251658435 = i_1392509030;
            result_251658417[result_251658417_Idx][chckIndx(addInt(old_251658421, iHEX60gensym4_251658435), 0, (result_251658417[result_251658417_Idx]).length - 1)] = x_251658418.charCodeAt(chckIndx(addInt(start_251658419, iHEX60gensym4_251658435), 0, (x_251658418).length - 1));
            i_1392509030 = addInt(i_1392509030, 1);
          }
      } while (false);
    } while (false);


}

function addChars_251658411(result_251658413, result_251658413_Idx, x_251658414) {
    addChars_251658415(result_251658413, result_251658413_Idx, x_251658414, 0, ((x_251658414) == null ? 0 : (x_251658414).length));


}

function addInt_251658436(result_251658437, result_251658437_Idx, x_251658438) {
    addChars_251658411(result_251658437, result_251658437_Idx, ((x_251658438) + ""));


}

function addInt_251658457(result_251658458, result_251658458_Idx, x_251658459) {
    addInt_251658436(result_251658458, result_251658458_Idx, x_251658459);


}

function HEX24_352321539(x_352321540) {
  var result_352321541 = [[]];

    addInt_251658457(result_352321541, 0, x_352321540);

  return result_352321541[0];

}

function raiseIndexError(i_33556754, a_33556755, b_33556756) {
    var Temporary1;

    if ((b_33556756 < a_33556755)) {
    Temporary1 = makeNimstrLit("index out of bounds, the container is empty");
    }
    else {
    Temporary1 = (makeNimstrLit("index ") || []).concat(HEX24_352321539(i_33556754) || [],makeNimstrLit(" not in ") || [],HEX24_352321539(a_33556755) || [],makeNimstrLit(" .. ") || [],HEX24_352321539(b_33556756) || []);
    }

    raiseException({message: nimCopy(null, Temporary1, NTI33554439), parent: null, m_type: NTI33555131, name: null, trace: [], up: null}, "IndexDefect");


}

function nimIdentNormalize_486539369(s_486539370) {
  var result_486539371 = [];

  BeforeRet: do {
    result_486539371 = nimCopy(null, mnewString(chckRange((s_486539370).length, 0, 2147483647)), NTI33554439);
    if (((s_486539370).length == 0)) {
    break BeforeRet;
    }

    result_486539371[chckIndx(0, 0, (result_486539371).length - 1)] = s_486539370[chckIndx(0, 0, (s_486539370).length - 1)];
    var j_486539372 = 1;
    Label1: do {
      var i_486539377 = 0;
      var colontmp__1392508982 = 0;
      colontmp__1392508982 = subInt((s_486539370).length, 1);
      var res_1392508983 = 1;
      Label2: do {
          Label3: while (true) {
          if (!(res_1392508983 <= colontmp__1392508982)) break Label3;
            i_486539377 = res_1392508983;
            if ((ConstSet2[s_486539370[chckIndx(i_486539377, 0, (s_486539370).length - 1)]] != undefined)) {
            result_486539371[chckIndx(j_486539372, 0, (result_486539371).length - 1)] = chckRange(addInt(s_486539370[chckIndx(i_486539377, 0, (s_486539370).length - 1)], 32), 0, 255);
            j_486539372 = addInt(j_486539372, 1);
            }
            else {
            if (!((s_486539370[chckIndx(i_486539377, 0, (s_486539370).length - 1)] == 95))) {
            result_486539371[chckIndx(j_486539372, 0, (result_486539371).length - 1)] = s_486539370[chckIndx(i_486539377, 0, (s_486539370).length - 1)];
            j_486539372 = addInt(j_486539372, 1);
            }
            }
            res_1392508983 = addInt(res_1392508983, 1);
          }
      } while (false);
    } while (false);
    if (!((j_486539372 == (s_486539370).length))) {
    (result_486539371.length = chckRange(j_486539372, 0, 2147483647));
    }

  } while (false);

  return result_486539371;

}

function parseEnum_1392508940(s_1392508942) {
    var Temporary1;

  var result_1392508943 = 0;

    switch (toJSStr(nimIdentNormalize_486539369(s_1392508942))) {
    case "Debug":
      Temporary1 = 0;
      break;
    case "Info":
      Temporary1 = 1;
      break;
    case "Warn":
      Temporary1 = 2;
      break;
    case "Error":
      Temporary1 = 3;
      break;
    default:
      raiseException({message: (makeNimstrLit("Invalid enum value: ") || []).concat(s_1392508942 || []), parent: null, m_type: NTI33555128, name: null, trace: [], up: null}, "ValueError");
      break;
    }
    result_1392508943 = Temporary1;

  return result_1392508943;

}

function get_1409286161(a_1409286162, default_1409286163) {
  var result_1409286164 = [];

  BeforeRet: do {
    var r_1409286165 = process.env[toJSStr(a_1409286162)];
    if ((0 < ((r_1409286165) == null ? 0 : (r_1409286165).length))) {
    result_1409286164 = nimCopy(null, cstrToNimstr(r_1409286165), NTI33554439);
    break BeforeRet;
    }
    else {
      result_1409286164 = nimCopy(null, default_1409286163, NTI33554439);
      break BeforeRet;
    }

  } while (false);

  return result_1409286164;

}
var LOG_LEVEL_1392509023 = parseEnum_1392508940(get_1409286161(makeNimstrLit("CODETRACER_LOG_LEVEL"), makeNimstrLit("INFO")));
let __acpSdk;
try {
  __acpSdk = require('@agentclientprotocol/sdk');
} catch (e) {
  const path = require('path');
  const candidates = [
    path.join(process.cwd(), 'node_modules', '@agentclientprotocol', 'sdk'),
    path.join(process.cwd(), 'node-packages', 'node_modules', '@agentclientprotocol', 'sdk')
  ];
  for (const c of candidates) {
    try {
      __acpSdk = require(c);
      break;
    } catch {}
  }
  if (!__acpSdk) throw e;
}


function HEX5BHEX5D_33557709(s_33557710, i_33557711) {
  var result_33557712 = 0;

    result_33557712 = s_33557710[chckIndx(subInt((s_33557710).length, i_33557711), 0, (s_33557710).length - 1)];

  return result_33557712;

}

function HEX5BHEX5D_33557742(s_33557743, s_33557743_Idx, i_33557744) {
  var result_33557745 = null;
  var result_33557745_Idx = 0;

    result_33557745 = s_33557743[s_33557743_Idx]; result_33557745_Idx = chckIndx(subInt((s_33557743[s_33557743_Idx]).length, i_33557744), 0, (s_33557743[s_33557743_Idx]).length - 1);

  return [result_33557745, result_33557745_Idx];

}

function normalizePathEnd_1493172270(path_1493172271, path_1493172271_Idx, trailingSep_1493172272) {
            var Temporary3;
            var Temporary4;

  BeforeRet: do {
    if (((path_1493172271[path_1493172271_Idx]).length == 0)) {
    break BeforeRet;
    }

    var i_1493172273 = (path_1493172271[path_1493172271_Idx]).length;
    Label1: do {
        Label2: while (true) {
        if (!(1 <= i_1493172273)) break Label2;
          if ((ConstSet5[path_1493172271[path_1493172271_Idx][chckIndx(subInt(i_1493172273, 1), 0, (path_1493172271[path_1493172271_Idx]).length - 1)]] != undefined)) {
          i_1493172273 = subInt(i_1493172273, 1);
          }
          else {
            if (!(path_1493172271[path_1493172271_Idx][chckIndx(subInt(i_1493172273, 1), 0, (path_1493172271[path_1493172271_Idx]).length - 1)] == 46)) Temporary4 = false; else {              Temporary4 = (2 <= i_1493172273);            }            if (!Temporary4) Temporary3 = false; else {              Temporary3 = (ConstSet6[path_1493172271[path_1493172271_Idx][chckIndx(subInt(i_1493172273, 2), 0, (path_1493172271[path_1493172271_Idx]).length - 1)]] != undefined);            }          if (Temporary3) {
          i_1493172273 = subInt(i_1493172273, 1);
          }
          else {
            break Label1;
          }
          }
        }
    } while (false);
    if (trailingSep_1493172272) {
    (path_1493172271[path_1493172271_Idx].length = chckRange(i_1493172273, 0, 2147483647));
    addChar(path_1493172271[path_1493172271_Idx], 47);;
    }
    else {
    if ((0 < i_1493172273)) {
    (path_1493172271[path_1493172271_Idx].length = chckRange(i_1493172273, 0, 2147483647));
    }
    else {
      path_1493172271[path_1493172271_Idx] = nimCopy(null, makeNimstrLit("/"), NTI33554439);
    }
    }
  } while (false);


}

function hasNext_1509949446(it_1509949447, x_1509949448) {
  var result_1509949449 = false;

    result_1509949449 = (it_1509949447.i < (x_1509949448).length);

  return result_1509949449;

}

function next_1509949450(it_1509949451, x_1509949452) {
      var Temporary1;
            var Temporary4;
          var Temporary7;

  var result_1509949453 = {Field0: 0, Field1: 0};

    it_1509949451.prev = it_1509949451.i;
      if (!!(it_1509949451.notFirst)) Temporary1 = false; else {        Temporary1 = (ConstSet8[x_1509949452[chckIndx(it_1509949451.i, 0, (x_1509949452).length - 1)]] != undefined);      }    if (Temporary1) {
    it_1509949451.i = addInt(it_1509949451.i, 1);
    }
    else {
      Label2: do {
          Label3: while (true) {
            if (!(it_1509949451.i < (x_1509949452).length)) Temporary4 = false; else {              Temporary4 = !((ConstSet9[x_1509949452[chckIndx(it_1509949451.i, 0, (x_1509949452).length - 1)]] != undefined));            }          if (!Temporary4) break Label3;
            it_1509949451.i = addInt(it_1509949451.i, 1);
          }
      } while (false);
    }

    if ((it_1509949451.prev < it_1509949451.i)) {
    var colontmp__1593835699 = it_1509949451.prev;
    var colontmp__1593835700 = subInt(it_1509949451.i, 1);
    result_1509949453 = nimCopy(result_1509949453, {Field0: colontmp__1593835699, Field1: colontmp__1593835700}, NTI1509949447);
    }
    else {
    if (hasNext_1509949446(it_1509949451, x_1509949452)) {
    result_1509949453 = nimCopy(result_1509949453, next_1509949450(it_1509949451, x_1509949452), NTI1509949447);
    }
    }
    Label5: do {
        Label6: while (true) {
          if (!(it_1509949451.i < (x_1509949452).length)) Temporary7 = false; else {            Temporary7 = (ConstSet10[x_1509949452[chckIndx(it_1509949451.i, 0, (x_1509949452).length - 1)]] != undefined);          }        if (!Temporary7) break Label6;
          it_1509949451.i = addInt(it_1509949451.i, 1);
        }
    } while (false);
    it_1509949451.notFirst = true;

  return result_1509949453;

}

function isSlash_1509949503(x_1509949504, bounds_1509949505) {
  var result_1509949506 = false;

    result_1509949506 = ((bounds_1509949505["Field1"] == bounds_1509949505["Field0"]) && (ConstSet11[x_1509949504[chckIndx(bounds_1509949505["Field0"], 0, (x_1509949504).length - 1)]] != undefined));

  return result_1509949506;

}

function isDotDot_1509949499(x_1509949500, bounds_1509949501) {
  var result_1509949502 = false;

    result_1509949502 = (((bounds_1509949501["Field1"] == addInt(bounds_1509949501["Field0"], 1)) && (x_1509949500[chckIndx(bounds_1509949501["Field0"], 0, (x_1509949500).length - 1)] == 46)) && (x_1509949500[chckIndx(addInt(bounds_1509949501["Field0"], 1), 0, (x_1509949500).length - 1)] == 46));

  return result_1509949502;

}

function substr_33557906(s_33557907, first_33557908, last_33557909) {
  var result_33557910 = [];

    var first_33557911 = nimMax(first_33557908, 0);
    var L_33557912 = nimMax(addInt(subInt(nimMin(last_33557909, (s_33557907).length - 1), first_33557911), 1), 0);
    result_33557910 = nimCopy(null, mnewString(chckRange(L_33557912, 0, 2147483647)), NTI33554439);
    Label1: do {
      var i_33557917 = 0;
      var colontmp__1593835703 = 0;
      colontmp__1593835703 = subInt(L_33557912, 1);
      var res_1593835704 = 0;
      Label2: do {
          Label3: while (true) {
          if (!(res_1593835704 <= colontmp__1593835703)) break Label3;
            i_33557917 = res_1593835704;
            result_33557910[chckIndx(i_33557917, 0, (result_33557910).length - 1)] = s_33557907[chckIndx(addInt(i_33557917, first_33557911), 0, (s_33557907).length - 1)];
            res_1593835704 = addInt(res_1593835704, 1);
          }
      } while (false);
    } while (false);

  return result_33557910;

}

function isDot_1509949495(x_1509949496, bounds_1509949497) {
  var result_1509949498 = false;

    result_1509949498 = ((bounds_1509949497["Field1"] == bounds_1509949497["Field0"]) && (x_1509949496[chckIndx(bounds_1509949497["Field0"], 0, (x_1509949496).length - 1)] == 46));

  return result_1509949498;

}

function addNormalizePath_1509949511(x_1509949512, result_1509949513, result_1509949513_Idx, state_1509949514, state_1509949514_Idx, dirSep_1509949515) {
            var Temporary5;
            var Temporary6;
                var Temporary9;
              var Temporary10;
            var Temporary11;
      var Temporary12;

    var it_1509949516 = [({i: 0, prev: 0, notFirst: false})];
    it_1509949516[0].notFirst = (0 < (state_1509949514[state_1509949514_Idx] >> 1));
    if (it_1509949516[0].notFirst) {
    Label1: do {
        Label2: while (true) {
        if (!((it_1509949516[0].i < (x_1509949512).length) && (ConstSet7[x_1509949512[chckIndx(it_1509949516[0].i, 0, (x_1509949512).length - 1)]] != undefined))) break Label2;
          it_1509949516[0].i = addInt(it_1509949516[0].i, 1);
        }
    } while (false);
    }

    Label3: do {
        Label4: while (true) {
        if (!hasNext_1509949446(it_1509949516[0], x_1509949512)) break Label4;
          var b_1509949529 = next_1509949450(it_1509949516[0], x_1509949512);
            if (!((state_1509949514[state_1509949514_Idx] >> 1) == 0)) Temporary5 = false; else {              Temporary5 = isSlash_1509949503(x_1509949512, b_1509949529);            }          if (Temporary5) {
            if (((result_1509949513[result_1509949513_Idx]).length == 0)) Temporary6 = true; else {              Temporary6 = !((ConstSet12[result_1509949513[result_1509949513_Idx][chckIndx(subInt((result_1509949513[result_1509949513_Idx]).length, 1), 0, (result_1509949513[result_1509949513_Idx]).length - 1)]] != undefined));            }          if (Temporary6) {
          addChar(result_1509949513[result_1509949513_Idx], dirSep_1509949515);;
          }

          state_1509949514[state_1509949514_Idx] = (state_1509949514[state_1509949514_Idx] | 1);
          }
          else {
          if (isDotDot_1509949499(x_1509949512, b_1509949529)) {
          if ((1 <= (state_1509949514[state_1509949514_Idx] >> 1))) {
          var d_1509949542 = (result_1509949513[result_1509949513_Idx]).length;
          Label7: do {
              Label8: while (true) {
                if (!((state_1509949514[state_1509949514_Idx] & 1) < subInt(d_1509949542, 1))) Temporary9 = false; else {                  Temporary9 = !((ConstSet13[result_1509949513[result_1509949513_Idx][chckIndx(subInt(d_1509949542, 1), 0, (result_1509949513[result_1509949513_Idx]).length - 1)]] != undefined));                }              if (!Temporary9) break Label8;
                d_1509949542 = subInt(d_1509949542, 1);
              }
          } while (false);
          if ((0 < d_1509949542)) {
          (result_1509949513[result_1509949513_Idx].length = chckRange(subInt(d_1509949542, 1), 0, 2147483647));
          state_1509949514[state_1509949514_Idx] = subInt(state_1509949514[state_1509949514_Idx], 2);
          }

          }
          else {
              if (!(0 < (result_1509949513[result_1509949513_Idx]).length)) Temporary10 = false; else {                Temporary10 = !((ConstSet14[result_1509949513[result_1509949513_Idx][chckIndx(subInt((result_1509949513[result_1509949513_Idx]).length, 1), 0, (result_1509949513[result_1509949513_Idx]).length - 1)]] != undefined));              }            if (Temporary10) {
            addChar(result_1509949513[result_1509949513_Idx], dirSep_1509949515);;
            }

            result_1509949513[result_1509949513_Idx].push.apply(result_1509949513[result_1509949513_Idx], substr_33557906(x_1509949512, b_1509949529["Field0"], b_1509949529["Field1"]));;
          }

          }
          else {
          if (isDot_1509949495(x_1509949512, b_1509949529)) {
          }
          else {
          if ((b_1509949529["Field0"] <= b_1509949529["Field1"])) {
            if (!(0 < (result_1509949513[result_1509949513_Idx]).length)) Temporary11 = false; else {              Temporary11 = !((ConstSet15[result_1509949513[result_1509949513_Idx][chckIndx(subInt((result_1509949513[result_1509949513_Idx]).length, 1), 0, (result_1509949513[result_1509949513_Idx]).length - 1)]] != undefined));            }          if (Temporary11) {
          addChar(result_1509949513[result_1509949513_Idx], dirSep_1509949515);;
          }

          result_1509949513[result_1509949513_Idx].push.apply(result_1509949513[result_1509949513_Idx], substr_33557906(x_1509949512, b_1509949529["Field0"], b_1509949529["Field1"]));;
          state_1509949514[state_1509949514_Idx] = addInt(state_1509949514[state_1509949514_Idx], 2);
          }
          }}}
        }
    } while (false);
      if (!eqStrings(result_1509949513[result_1509949513_Idx], [])) Temporary12 = false; else {        Temporary12 = !(eqStrings(x_1509949512, []));      }    if (Temporary12) {
    result_1509949513[result_1509949513_Idx] = nimCopy(null, makeNimstrLit("."), NTI33554439);
    }



}

function joinPathImpl_1493172301(result_1493172302, result_1493172302_Idx, state_1493172303, state_1493172303_Idx, tail_1493172304) {
    var Temporary1;
    var Temporary2;
      var Temporary3;
        var Temporary4;
          var Temporary5;

    if (!(0 < (tail_1493172304).length)) Temporary2 = false; else {      Temporary2 = (ConstSet3[HEX5BHEX5D_33557709(tail_1493172304, 1)] != undefined);    }    if (Temporary2) Temporary1 = true; else {      if (!((tail_1493172304).length == 0)) Temporary3 = false; else {        if (!(0 < (result_1493172302[result_1493172302_Idx]).length)) Temporary4 = false; else {          Temporary4 = (ConstSet4[(Temporary5 = HEX5BHEX5D_33557742(result_1493172302, result_1493172302_Idx, 1), Temporary5)[0][Temporary5[1]]] != undefined);        }        Temporary3 = Temporary4;      }      Temporary1 = Temporary3;    }    var trailingSep_1493172313 = Temporary1;
    normalizePathEnd_1493172270(result_1493172302, result_1493172302_Idx, false);
    addNormalizePath_1509949511(tail_1493172304, result_1493172302, result_1493172302_Idx, state_1493172303, state_1493172303_Idx, 47);
    normalizePathEnd_1493172270(result_1493172302, result_1493172302_Idx, trailingSep_1493172313);


}

function nosjoinPath(head_1493172315, tail_1493172316) {
  var result_1493172317 = [[]];

    result_1493172317[0] = nimCopy(null, mnewString(0), NTI33554439);
    var state_1493172318 = [0];
    joinPathImpl_1493172301(result_1493172317, 0, state_1493172318, 0, head_1493172315);
    joinPathImpl_1493172301(result_1493172317, 0, state_1493172318, 0, tail_1493172316);

  return result_1493172317[0];

}

function HEX2F_1493172340(head_1493172341, tail_1493172342) {
  var result_1493172343 = [];

    result_1493172343 = nimCopy(null, nosjoinPath(head_1493172341, tail_1493172342), NTI33554439);

  return result_1493172343;

}

function normalizePath_1509949567(path_1509949568, dirSep_1509949569) {
  var result_1509949570 = [[]];

    result_1509949570[0] = nimCopy(null, mnewString(0), NTI33554439);
    var state_1509949571 = [0];
    addNormalizePath_1509949511(path_1509949568, result_1509949570, 0, state_1509949571, 0, dirSep_1509949569);

  return result_1509949570[0];

}

function parentDirPos_1493172414(path_1493172415) {
      var Temporary1;

  var result_1493172416 = 0;

  BeforeRet: do {
    var q_1493172417 = 1;
      if (!(1 <= (path_1493172415).length)) Temporary1 = false; else {        Temporary1 = (ConstSet16[path_1493172415[chckIndx(subInt((path_1493172415).length, 1), 0, (path_1493172415).length - 1)]] != undefined);      }    if (Temporary1) {
    q_1493172417 = 2;
    }

    Label2: do {
      var i_1493172427 = 0;
      var colontmp__1593835707 = 0;
      colontmp__1593835707 = subInt((path_1493172415).length, q_1493172417);
      var res_1593835709 = colontmp__1593835707;
      Label3: do {
          Label4: while (true) {
          if (!(0 <= res_1593835709)) break Label4;
            i_1493172427 = res_1593835709;
            if ((ConstSet17[path_1493172415[chckIndx(i_1493172427, 0, (path_1493172415).length - 1)]] != undefined)) {
            result_1493172416 = i_1493172427;
            break BeforeRet;
            }

            res_1593835709 = subInt(res_1593835709, 1);
          }
      } while (false);
    } while (false);
    result_1493172416 = -1;
  } while (false);

  return result_1493172416;

}

function nosparentDir(path_1493172433) {
      var Temporary1;
        var Temporary2;

  var result_1493172434 = [[]];

    result_1493172434[0] = nimCopy(null, normalizePath_1509949567(path_1493172433, 47), NTI33554439);
    var sepPos_1493172435 = parentDirPos_1493172414(result_1493172434[0]);
    if ((0 <= sepPos_1493172435)) {
    result_1493172434[0] = nimCopy(null, substr_33557906(result_1493172434[0], 0, sepPos_1493172435), NTI33554439);
    normalizePathEnd_1493172270(result_1493172434, 0, false);
    }
    else {
      if (((eqStrings(result_1493172434[0], makeNimstrLit("..")) || eqStrings(result_1493172434[0], makeNimstrLit("."))) || ((result_1493172434[0]).length == 0))) Temporary1 = true; else {        Temporary1 = (ConstSet18[(Temporary2 = HEX5BHEX5D_33557742(result_1493172434, 0, 1), Temporary2)[0][Temporary2[1]]] != undefined);      }    if (Temporary1) {
    result_1493172434[0] = nimCopy(null, [], NTI33554439);
    }
    else {
      result_1493172434[0] = nimCopy(null, makeNimstrLit("."), NTI33554439);
    }
    }

  return result_1493172434[0];

}

function newSeq_469762517(len_469762519) {
  var result_469762520 = [];

    result_469762520 = new Array(len_469762519); for (var i = 0 ; i < len_469762519 ; ++i) { result_469762520[i] = []; }
  return result_469762520;

}

function sysFatal_218103842(message_218103845) {
    raiseException({message: nimCopy(null, message_218103845, NTI33554439), m_type: NTI33555127, parent: null, name: null, trace: [], up: null}, "AssertionDefect");


}

function raiseAssert_218103840(msg_218103841) {
    sysFatal_218103842(msg_218103841);


}

function failedAssertImpl_218103864(msg_218103865) {
    raiseAssert_218103840(msg_218103865);


}
  var Temporary3;
var nodeOs_1593835538 = require("os");
var username_1593835547 = nodeOs_1593835538.userInfo().username;
var inUiTest_1593835548 = [false];
inUiTest_1593835548[0] = eqStrings(get_1409286161(makeNimstrLit("CODETRACER_IN_UI_TEST"), []), makeNimstrLit("1"));
var codetracerExeDir_1593835551 = get_1409286161(makeNimstrLit("NIX_CODETRACER_EXE_DIR"), makeNimstrLit("<unknown>"));
var linksPathValue_1593835552 = [get_1409286161(makeNimstrLit("LINKS_PATH_DIR"), [])];
if ((((linksPathValue_1593835552[0]).length == 0) || eqStrings(linksPathValue_1593835552[0], makeNimstrLit("<unknown>")))) {
  if (!(0 < (codetracerExeDir_1593835551).length)) Temporary3 = false; else {    Temporary3 = !(eqStrings(codetracerExeDir_1593835551, makeNimstrLit("<unknown>")));  }if (Temporary3) {
linksPathValue_1593835552[0] = nimCopy(null, codetracerExeDir_1593835551, NTI33554439);
}

}

var linksPath_1593835553 = nimCopy(null, linksPathValue_1593835552[0], NTI33554439);
var codetracerExe_1593835554 = HEX2F_1493172340(HEX2F_1493172340(codetracerExeDir_1593835551, makeNimstrLit("bin")), makeNimstrLit("ct"));
var dbBackendRecordExe_1593835555 = HEX2F_1493172340(HEX2F_1493172340(codetracerExeDir_1593835551, makeNimstrLit("bin")), makeNimstrLit("db-backend-record"));
var cTraceSourcePath_1593835556 = HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("src")), makeNimstrLit("trace.c"));
var consoleExe_1593835557 = HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("console"));
var ctRemoteExe_1593835558 = HEX2F_1493172340(HEX2F_1493172340(codetracerExeDir_1593835551, makeNimstrLit("bin")), makeNimstrLit("ct-remote"));
var bashExe_1593835559 = HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("bash"));
var taskProcessExe_1593835560 = HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("task_process"));
var python3Path_1593835561 = HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("python3"));
var rubyExe_1593835562 = get_1409286161(makeNimstrLit("CODETRACER_RUBY_EXE_PATH"), HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("ruby")));
var rubyRecorderPath_1593835563 = get_1409286161(makeNimstrLit("CODETRACER_RUBY_RECORDER_PATH"), HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("codetracer-pure-ruby-recorder")));
var smallExe_1593835564 = HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("small-lang"));
var noirExe_1593835565 = get_1409286161(makeNimstrLit("CODETRACER_NOIR_EXE_PATH"), HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("nargo")));
var wazeroExe_1593835566 = get_1409286161(makeNimstrLit("CODETRACER_WASM_VM_PATH"), HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("wazero")));
var dbBackendExe_1593835567 = HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("db-backend"));
var backendManagerExe_1593835568 = HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("backend-manager"));
var virtualizationLayersExe_1593835569 = HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("virtualization-layers"));
var ctagsExe_1593835570 = HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("ctags"));
var cargoExe_1593835571 = HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("cargo"));
var electronExe_1593835572 = HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("electron"));
var electronIndexPath_1593835573 = HEX2F_1493172340(HEX2F_1493172340(codetracerExeDir_1593835551, makeNimstrLit("src")), makeNimstrLit("index.js"));
var userInterfacePath_1593835574 = HEX2F_1493172340(codetracerExeDir_1593835551, makeNimstrLit("ui.js"));
var chromedriverExe_1593835575 = HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("chromedriver"));
var cTraceObjectFilePath_1593835576 = get_1409286161(makeNimstrLit("CODETRACER_C_TRACE_OBJECT_FILE_PATH"), HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("lib")), makeNimstrLit("trace.o")));
var tmpFolder_1593835577 = get_1409286161(makeNimstrLit("TMPDIR"), get_1409286161(makeNimstrLit("TEMPDIR"), get_1409286161(makeNimstrLit("TEMP"), get_1409286161(makeNimstrLit("TMP"), makeNimstrLit("/tmp")))));
var codetracerCache_1593835578 = HEX2F_1493172340(tmpFolder_1593835577, makeNimstrLit("codetracer/cache"));
var codetracerTmpPath_1593835579 = HEX2F_1493172340(tmpFolder_1593835577, makeNimstrLit("codetracer"));
Label4: do {
  var fmtRes_1593835588 = [mnewString(0)];
  fmtRes_1593835588[0].push.apply(fmtRes_1593835588[0], makeNimstrLit("shell_preload_"));;
  add_33556419(fmtRes_1593835588, 0, username_1593835547);
  fmtRes_1593835588[0].push.apply(fmtRes_1593835588[0], makeNimstrLit(".so"));;
} while (false);
var localShellPreloadInstallPath_1593835593 = HEX2F_1493172340(codetracerTmpPath_1593835579, fmtRes_1593835588[0]);
var shellPreloadPath_1593835594 = [HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("lib")), makeNimstrLit("shell_preload.so"))];
var codetracerInstallDir_1593835595 = nosparentDir(nosparentDir(codetracerExeDir_1593835551));
var nodeModulesPath_1593835596 = HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("node_modules"));
var codetracerTestDir_1593835597 = HEX2F_1493172340(HEX2F_1493172340(codetracerInstallDir_1593835595, makeNimstrLit("src")), makeNimstrLit("tests"));
var codetracerNixResultExe_1593835598 = HEX2F_1493172340(HEX2F_1493172340(HEX2F_1493172340(codetracerInstallDir_1593835595, makeNimstrLit("result")), makeNimstrLit("bin")), makeNimstrLit("ct"));
var codetracerTestBuildDir_1593835599 = HEX2F_1493172340(codetracerExeDir_1593835551, makeNimstrLit("tests"));
var programDir_1593835600 = HEX2F_1493172340(codetracerTestDir_1593835597, makeNimstrLit("programs"));
var recordDir_1593835601 = HEX2F_1493172340(codetracerTestDir_1593835597, makeNimstrLit("records"));
var testProgramBinariesDir_1593835602 = HEX2F_1493172340(codetracerTestDir_1593835597, makeNimstrLit("binaries"));
var runDir_1593835603 = HEX2F_1493172340(codetracerTestBuildDir_1593835599, makeNimstrLit("run"));
var reportFilesDir_1593835604 = HEX2F_1493172340(codetracerTestDir_1593835597, makeNimstrLit("report-files"));
var rubyPath_1593835605 = HEX2F_1493172340(HEX2F_1493172340(HEX2F_1493172340(codetracerInstallDir_1593835595, makeNimstrLit("libs")), makeNimstrLit("ruby")), makeNimstrLit("ruby"));
var luaPath_1593835606 = HEX2F_1493172340(HEX2F_1493172340(codetracerInstallDir_1593835595, makeNimstrLit("libs")), makeNimstrLit("lua"));
var nimcacheDir_1593835607 = HEX2F_1493172340(codetracerTmpPath_1593835579, makeNimstrLit("codetracer_projects/"));
var scriptExe_1593835608 = HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("script"));
var nodeExe_1593835609 = HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("node"));
var zipExe_1593835610 = HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("zip"));
var unzipExe_1593835611 = HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("unzip"));
var curlExe_1593835612 = HEX2F_1493172340(HEX2F_1493172340(linksPath_1593835553, makeNimstrLit("bin")), makeNimstrLit("curl"));
var home_1593835617 = cstrToNimstr((nodeOs_1593835538.homedir() + "/"));
var codetracerTraceDir_1593835618 = HEX2F_1493172340(HEX2F_1493172340(HEX2F_1493172340(home_1593835617, makeNimstrLit(".local")), makeNimstrLit("share")), makeNimstrLit("codetracer"));
var DB_FOLDERS_1593835623 = [nimCopy(null, codetracerTraceDir_1593835618, NTI33554439), nimCopy(null, codetracerTestDir_1593835597, NTI33554439)];
Label5: do {
  var iHEX60gensym8_1593835661 = [0];
  var resultHEX60gensym8_1593835668 = [newSeq_469762517(chckRange((DB_FOLDERS_1593835623).length, 0, 2147483647))];
  Label6: do {
    var it_1593835672 = [[]];
    var i_1593835691 = 0;
    var L_1593835692 = (DB_FOLDERS_1593835623).length;
    Label7: do {
        Label8: while (true) {
        if (!(i_1593835691 < L_1593835692)) break Label8;
          it_1593835672[0] = DB_FOLDERS_1593835623[chckIndx(i_1593835691, 0, (DB_FOLDERS_1593835623).length - 1)];
          resultHEX60gensym8_1593835668[0][chckIndx(iHEX60gensym8_1593835661[0], 0, (resultHEX60gensym8_1593835668[0]).length - 1)] = nimCopy(null, HEX2F_1493172340(it_1593835672[0], makeNimstrLit("trace_index.db")), NTI33554439);
          iHEX60gensym8_1593835661[0] = addInt(iHEX60gensym8_1593835661[0], 1);
          i_1593835691 = addInt(i_1593835691, 1);
          if (!(((DB_FOLDERS_1593835623).length == L_1593835692))) {
          failedAssertImpl_218103864(makeNimstrLit("iterators.nim:240:11 `len(a) == L` the length of the seq changed while iterating over it"));
          }

        }
    } while (false);
  } while (false);
} while (false);
var DB_PATHS_1593835677 = nimCopy(null, resultHEX60gensym8_1593835668[0], NTI469762342);

function substrEq_486539493(s_486539494, pos_486539495, substr_486539496) {
    var Temporary1;

  var result_486539497 = false;

    var length_486539498 = (substr_486539496).length;
    if ((0 < length_486539498)) {
    var i_486539499 = 0;
    Label2: do {
        Label3: while (true) {
        if (!(((i_486539499 < length_486539498) && (addInt(pos_486539495, i_486539499) < (s_486539494).length)) && (s_486539494[chckIndx(addInt(pos_486539495, i_486539499), 0, (s_486539494).length - 1)] == substr_486539496[chckIndx(i_486539499, 0, (substr_486539496).length - 1)]))) break Label3;
          i_486539499 = addInt(i_486539499, 1);
        }
    } while (false);
    Temporary1 = (i_486539499 == length_486539498);
    }
    else {
    Temporary1 = false;
    }

    result_486539497 = Temporary1;

  return result_486539497;

}

function reverse_486539822(a_486539824, first_486539825, last_486539826) {
    var x_486539827 = first_486539825;
    var y_486539828 = last_486539826;
    Label1: do {
        Label2: while (true) {
        if (!(x_486539827 < y_486539828)) break Label2;
          var Temporary3 = a_486539824[chckIndx(x_486539827, 0, (a_486539824).length - 1)]; a_486539824[chckIndx(x_486539827, 0, (a_486539824).length - 1)] = a_486539824[chckIndx(y_486539828, 0, (a_486539824).length - 1)]; a_486539824[chckIndx(y_486539828, 0, (a_486539824).length - 1)] = Temporary3;          y_486539828 = subInt(y_486539828, 1);
          x_486539827 = addInt(x_486539827, 1);
        }
    } while (false);


}

function reverse_486539816(a_486539818) {
    reverse_486539822(a_486539818, 0, chckRange(nimMax(0, (a_486539818).length - 1), 0, 2147483647));


}

function nsuRSplitString(s_486539869, sep_486539870, maxsplit_486539871) {
      var Temporary2;
                  var Temporary7;

  var result_486539872 = [];

    result_486539872 = nimCopy(null, [], NTI486539711);
    Label1: do {
      var xHEX60gensym72_486539878 = [];
      if (((sep_486539870).length == 0)) {
      Temporary2 = 1;
      }
      else {
      Temporary2 = (sep_486539870).length;
      }

      var sepLen_1459617972 = Temporary2;
      var lastHEX60gensym54_1459617973 = subInt((s_486539869).length, 1);
      var firstHEX60gensym54_1459617974 = lastHEX60gensym54_1459617973;
      var splitsHEX60gensym54_1459617975 = maxsplit_486539871;
      var startPosHEX60gensym54_1459617976 = 0;
      Label3: do {
          Label4: while (true) {
          if (!(-1 <= firstHEX60gensym54_1459617974)) break Label4;
            Label5: do {
                Label6: while (true) {
                  if (!(0 <= firstHEX60gensym54_1459617974)) Temporary7 = false; else {                    Temporary7 = !(substrEq_486539493(s_486539869, firstHEX60gensym54_1459617974, sep_486539870));                  }                if (!Temporary7) break Label6;
                  firstHEX60gensym54_1459617974 = subInt(firstHEX60gensym54_1459617974, 1);
                }
            } while (false);
            if ((splitsHEX60gensym54_1459617975 == 0)) {
            firstHEX60gensym54_1459617974 = -1;
            }

            if ((firstHEX60gensym54_1459617974 == -1)) {
            startPosHEX60gensym54_1459617976 = 0;
            }
            else {
              startPosHEX60gensym54_1459617976 = addInt(firstHEX60gensym54_1459617974, sepLen_1459617972);
            }

            xHEX60gensym72_486539878 = substr_33557906(s_486539869, startPosHEX60gensym54_1459617976, lastHEX60gensym54_1459617973);
            var Temporary8 = nimCopy(null, xHEX60gensym72_486539878, NTI33554439);
            result_486539872.push(Temporary8);;
            if ((splitsHEX60gensym54_1459617975 == 0)) {
            break Label3;
            }

            splitsHEX60gensym54_1459617975 = subInt(splitsHEX60gensym54_1459617975, 1);
            firstHEX60gensym54_1459617974 = subInt(firstHEX60gensym54_1459617974, 1);
            lastHEX60gensym54_1459617973 = firstHEX60gensym54_1459617974;
          }
      } while (false);
    } while (false);
    reverse_486539816(result_486539872);

  return result_486539872;

}
var Temporary19;
var Temporary20;
var nodePath_1459617944 = [null];
var inElectron_1459617945 = [false];
var loadScripts_1459617946 = [false];
if (inElectron_1459617945[0]) {
nodePath_1459617944[0] = require("path");
}

var basedirText_1459617947 = nimCopy(null, (Temporary19 = nsuRSplitString(makeNimstrLit("/home/pesho/code/codetracer/src/frontend/lib/electron_lib.nim"), makeNimstrLit("/"), 1), Temporary19)[chckIndx(0, 0, (Temporary19).length - 1)], NTI33554439);
if (!(inElectron_1459617945[0])) {
nodePath_1459617944[0] = require("path");
}

var basedir_1459617948 = toJSStr(basedirText_1459617947);
if (!((__dirname == null))) {
Temporary20 = (cstrToNimstr(__dirname) || []).concat(makeNimstrLit("/") || []);
}
else {
Temporary20 = [];
}

var currentPath_1459617949 = nimCopy(null, Temporary20, NTI33554439);
var chomedriverExe_1459617950 = (linksPath_1593835553 || []).concat(makeNimstrLit("/bin/chromedriver") || []);
var yaml_1610612801 = [null];
if (inElectron_1459617945[0]) {
yaml_1610612801[0] = require("js-yaml");
}
else {
  yaml_1610612801[0] = require("js-yaml");
}

var helpers = null;
if (inElectron_1459617945[0]) {
helpers = require("./helpers");
}

var electron_1442840581 = require("electron");
var dialog_1442840586 = electron_1442840581.dialog;
var app_1442840591 = electron_1442840581.app;
var Menu_1442840596 = electron_1442840581.Menu;
var electronDebug_1442840597 = [require("electron-debug")];
var callerProcessPid_1442840598 = [-1];
var mainWindow_1442840599 = [null];
console.time("index: starting backend");

function nextPowerOfTwo_520093872(x_520093873) {
  var result_520093874 = 0;

    result_520093874 = (x_520093873 - 1);
    result_520093874 = (result_520093874 | (result_520093874 >> 16));
    result_520093874 = (result_520093874 | (result_520093874 >> 8));
    result_520093874 = (result_520093874 | (result_520093874 >> 4));
    result_520093874 = (result_520093874 | (result_520093874 >> 2));
    result_520093874 = (result_520093874 | (result_520093874 >> 1));
    result_520093874 += (1 + ((x_520093873 <= 0) ? 1 : 0));

  return result_520093874;

}

function raiseDivByZero() {
    raiseException({message: makeNimstrLit("division by zero"), parent: null, m_type: NTI33555124, name: null, trace: [], up: null}, "DivByZeroDefect");


}

function slotsNeeded_1023410217(count_1023410218) {
  var result_1023410219 = 0;

    result_1023410219 = nextPowerOfTwo_520093872(addInt(divInt(mulInt(count_1023410218, 3), 2), 4));

  return result_1023410219;

}

function initTable_822083685(initialSize_822083688) {
  var result_822083689 = ({data: [], counter: 0});

    var correctSizeHEX60gensym0_822083691 = slotsNeeded_1023410217(chckRange(initialSize_822083688, 0, 2147483647));
    result_822083689.counter = 0;
    result_822083689.data = new Array(chckRange(correctSizeHEX60gensym0_822083691, 0, 2147483647)); for (var i = 0 ; i < chckRange(correctSizeHEX60gensym0_822083691, 0, 2147483647) ; ++i) { result_822083689.data[i] = {Field0: 0, Field1: null, Field2: ({currentMessageId: null, aggregatedContent: null, collectedUpdates: [], activePrompt: false, toolPreImages: ({data: [], counter: 0})})}; }
  return result_822083689;

}

function initTable_822083713(initialSize_822083716) {
  var result_822083717 = ({data: [], counter: 0});

    var correctSizeHEX60gensym2_822083719 = slotsNeeded_1023410217(chckRange(initialSize_822083716, 0, 2147483647));
    result_822083717.counter = 0;
    result_822083717.data = new Array(chckRange(correctSizeHEX60gensym2_822083719, 0, 2147483647)); for (var i = 0 ; i < chckRange(correctSizeHEX60gensym2_822083719, 0, 2147483647) ; ++i) { result_822083717.data[i] = {Field0: 0, Field1: null, Field2: null}; }
  return result_822083717;

}
var msgId_822083672 = [100];
var terminalCounter_822083673 = [0];
var acpProcess_822083674 = [null];
var acpStream_822083675 = [null];
var acpClient_822083676 = [null];
var acpInitialized_822083677 = [false];
var sessionsById_822083705 = [initTable_822083685(32)];
var acpSessionIdsByClient_822083733 = [initTable_822083713(32)];
var clientSessionIdsByAcp_822083740 = [initTable_822083713(32)];

function imul_1040187709(a_1040187710, b_1040187711) {
  var result_1040187712 = 0;

    var mask_1040187713 = 65535;
    var aHi_1040187718 = ((a_1040187710 >>> 16) & mask_1040187713);
    var aLo_1040187719 = (a_1040187710 & mask_1040187713);
    var bHi_1040187724 = ((b_1040187711 >>> 16) & mask_1040187713);
    var bLo_1040187725 = (b_1040187711 & mask_1040187713);
    result_1040187712 = ((((aLo_1040187719 * bLo_1040187725) >>> 0) + (((((aHi_1040187718 * bLo_1040187725) >>> 0) + ((aLo_1040187719 * bHi_1040187724) >>> 0)) >>> 0) << 16)) >>> 0);

  return result_1040187712;

}

function rotl32_1040187730(x_1040187731, r_1040187732) {
  var result_1040187733 = 0;

    result_1040187733 = ((x_1040187731 << r_1040187732) | (x_1040187731 >>> subInt(32, r_1040187732)));

  return result_1040187733;

}

function murmurHash_1040187742(x_1040187743) {
  var result_1040187744 = 0;

  BeforeRet: do {
    var size_1040187753 = (x_1040187743).length;
    var stepSize_1040187754 = 4;
    var n_1040187755 = divInt(size_1040187753, stepSize_1040187754);
    var h1_1040187756 = 0;
    var i_1040187757 = 0;
    Label1: do {
        Label2: while (true) {
        if (!(i_1040187757 < mulInt(n_1040187755, stepSize_1040187754))) break Label2;
          var k1_1040187760 = 0;
          var jHEX60gensym19_1040187776 = stepSize_1040187754;
          Label3: do {
              Label4: while (true) {
              if (!(0 < jHEX60gensym19_1040187776)) break Label4;
                jHEX60gensym19_1040187776 = subInt(jHEX60gensym19_1040187776, 1);
                k1_1040187760 = ((k1_1040187760 << 8) | x_1040187743[chckIndx(addInt(i_1040187757, jHEX60gensym19_1040187776), 0, (x_1040187743).length - 1)]);
              }
          } while (false);
          i_1040187757 = addInt(i_1040187757, stepSize_1040187754);
          k1_1040187760 = imul_1040187709(k1_1040187760, 3432918353);
          k1_1040187760 = rotl32_1040187730(k1_1040187760, 15);
          k1_1040187760 = imul_1040187709(k1_1040187760, 461845907);
          h1_1040187756 = (h1_1040187756 ^ k1_1040187760);
          h1_1040187756 = rotl32_1040187730(h1_1040187756, 13);
          h1_1040187756 = ((((h1_1040187756 * 5) >>> 0) + 3864292196) >>> 0);
        }
    } while (false);
    var k1_1040187792 = 0;
    var rem_1040187793 = modInt(size_1040187753, stepSize_1040187754);
    Label5: do {
        Label6: while (true) {
        if (!(0 < rem_1040187793)) break Label6;
          rem_1040187793 = subInt(rem_1040187793, 1);
          k1_1040187792 = ((k1_1040187792 << 8) | x_1040187743[chckIndx(addInt(i_1040187757, rem_1040187793), 0, (x_1040187743).length - 1)]);
        }
    } while (false);
    k1_1040187792 = imul_1040187709(k1_1040187792, 3432918353);
    k1_1040187792 = rotl32_1040187730(k1_1040187792, 15);
    k1_1040187792 = imul_1040187709(k1_1040187792, 461845907);
    h1_1040187756 = (h1_1040187756 ^ k1_1040187792);
    h1_1040187756 = (h1_1040187756 ^ size_1040187753);
    h1_1040187756 = (h1_1040187756 ^ (h1_1040187756 >>> 16));
    h1_1040187756 = imul_1040187709(h1_1040187756, 2246822507);
    h1_1040187756 = (h1_1040187756 ^ (h1_1040187756 >>> 13));
    h1_1040187756 = imul_1040187709(h1_1040187756, 3266489909);
    h1_1040187756 = (h1_1040187756 ^ (h1_1040187756 >>> 16));
    result_1040187744 = (h1_1040187756 | 0);
    break BeforeRet;
  } while (false);

  return result_1040187744;

}

function hash_1040187860(x_1040187861) {
  var result_1040187862 = 0;

    var xx_1040187863 = cstrToNimstr(x_1040187861);
    result_1040187862 = murmurHash_1040187742((xx_1040187863.slice(0, (xx_1040187863).length - 1 + 1)));

  return result_1040187862;

}

function isFilled_1023410206(hcode_1023410207) {
  var result_1023410208 = false;

    result_1023410208 = !((hcode_1023410207 == 0));

  return result_1023410208;

}

function nextTry_1023410209(h_1023410210, maxHash_1023410211) {
  var result_1023410212 = 0;

    result_1023410212 = (addInt(h_1023410210, 1) & maxHash_1023410211);

  return result_1023410212;

}

function rawGet_822086957(t_822086960, key_822086961, hc_822086962, hc_822086962_Idx) {
            var Temporary3;

  var result_822086963 = 0;

  BeforeRet: do {
    hc_822086962[hc_822086962_Idx] = hash_1040187860(key_822086961);
    if ((hc_822086962[hc_822086962_Idx] == 0)) {
    hc_822086962[hc_822086962_Idx] = 314159265;
    }

    if (((t_822086960.data).length == 0)) {
    result_822086963 = -1;
    break BeforeRet;
    }

    var h_822087015 = (hc_822086962[hc_822086962_Idx] & (t_822086960.data).length - 1);
    Label1: do {
        Label2: while (true) {
        if (!isFilled_1023410206(t_822086960.data[chckIndx(h_822087015, 0, (t_822086960.data).length - 1)].Field0)) break Label2;
            if (!(t_822086960.data[chckIndx(h_822087015, 0, (t_822086960.data).length - 1)].Field0 == hc_822086962[hc_822086962_Idx])) Temporary3 = false; else {              Temporary3 = (t_822086960.data[chckIndx(h_822087015, 0, (t_822086960.data).length - 1)].Field1 == key_822086961);            }          if (Temporary3) {
          result_822086963 = h_822087015;
          break BeforeRet;
          }

          h_822087015 = nextTry_1023410209(h_822087015, (t_822086960.data).length - 1);
        }
    } while (false);
    result_822086963 = subInt(-1, h_822087015);
  } while (false);

  return result_822086963;

}

function hasKey_822086950(t_822086953, key_822086954) {
  var result_822086955 = false;

    var hc_822086956 = [0];
    result_822086955 = (0 <= rawGet_822086957(t_822086953, key_822086954, hc_822086956, 0));

  return result_822086955;

}

function raiseKeyError_822084169(key_822084171) {
    raiseException({message: (makeNimstrLit("key not found: ") || []).concat(cstrToNimstr(key_822084171) || []), parent: null, m_type: NTI33555129, name: null, trace: [], up: null}, "KeyError");


}

function HEX5BHEX5D_822087240(t_822087243, key_822087244) {
  var result_822087245 = null;
  var result_822087245_Idx = 0;

    var hcHEX60gensym22_822087246 = [0];
    var indexHEX60gensym22_822087253 = rawGet_822086957(t_822087243, key_822087244, hcHEX60gensym22_822087246, 0);
    if ((0 <= indexHEX60gensym22_822087253)) {
    result_822087245 = t_822087243.data[chckIndx(indexHEX60gensym22_822087253, 0, (t_822087243.data).length - 1)]; result_822087245_Idx = "Field2";
    }
    else {
    raiseKeyError_822084169(key_822087244);
    }


  return [result_822087245, result_822087245_Idx];

}

function clientSessionForAcp_822087319(acpSessionId_822087320) {
    var Temporary1;
    var Temporary2;

  var result_822087321 = null;

    if (hasKey_822086950(clientSessionIdsByAcp_822083740[0], acpSessionId_822087320)) {
    Temporary1 = (Temporary2 = HEX5BHEX5D_822087240(clientSessionIdsByAcp_822083740[0], acpSessionId_822087320), Temporary2)[0][Temporary2[1]];
    }
    else {
    Temporary1 = "";
    }

    result_822087321 = Temporary1;

  return result_822087321;

}

function parseSaturatedNatural_503316796(s_503316797, b_503316798, b_503316798_Idx, start_503316799) {
      var Temporary1;
          var Temporary4;

  var result_503316800 = 0;

    var i_503316801 = start_503316799;
    if (((i_503316801 < (s_503316797).length) && (s_503316797[chckIndx(i_503316801, 0, (s_503316797).length - 1)] == 43))) {
    i_503316801 = addInt(i_503316801, 1);
    }

      if (!(i_503316801 < (s_503316797).length)) Temporary1 = false; else {        Temporary1 = (ConstSet23[s_503316797[chckIndx(i_503316801, 0, (s_503316797).length - 1)]] != undefined);      }    if (Temporary1) {
    b_503316798[b_503316798_Idx] = 0;
    Label2: do {
        Label3: while (true) {
          if (!(i_503316801 < (s_503316797).length)) Temporary4 = false; else {            Temporary4 = (ConstSet24[s_503316797[chckIndx(i_503316801, 0, (s_503316797).length - 1)]] != undefined);          }        if (!Temporary4) break Label3;
          var c_503316820 = subInt(s_503316797[chckIndx(i_503316801, 0, (s_503316797).length - 1)], 48);
          if ((b_503316798[b_503316798_Idx] <= divInt(subInt(2147483647, c_503316820), 10))) {
          b_503316798[b_503316798_Idx] = addInt(mulInt(b_503316798[b_503316798_Idx], 10), c_503316820);
          }
          else {
            b_503316798[b_503316798_Idx] = 2147483647;
          }

          i_503316801 = addInt(i_503316801, 1);
          Label5: do {
              Label6: while (true) {
              if (!((i_503316801 < (s_503316797).length) && (s_503316797[chckIndx(i_503316801, 0, (s_503316797).length - 1)] == 95))) break Label6;
                i_503316801 = addInt(i_503316801, 1);
              }
          } while (false);
        }
    } while (false);
    result_503316800 = subInt(i_503316801, start_503316799);
    }


  return result_503316800;

}

function HEX5BHEX5D_738200730(s_738200733, x_738200734) {
  var result_738200735 = [];

    var a_738200737 = x_738200734.a;
    var L_738200739 = addInt(subInt(subInt((s_738200733).length, x_738200734.b), a_738200737), 1);
    result_738200735 = nimCopy(null, mnewString(chckRange(L_738200739, 0, 2147483647)), NTI33554439);
    Label1: do {
      var i_738200744 = 0;
      var i_1241514351 = 0;
      Label2: do {
          Label3: while (true) {
          if (!(i_1241514351 < L_738200739)) break Label3;
            i_738200744 = i_1241514351;
            result_738200735[chckIndx(i_738200744, 0, (result_738200735).length - 1)] = s_738200733[chckIndx(addInt(i_738200744, a_738200737), 0, (s_738200733).length - 1)];
            i_1241514351 = addInt(i_1241514351, 1);
          }
      } while (false);
    } while (false);

  return result_738200735;

}

function HEX2EHEX2E_671088730(a_671088733, b_671088734) {
  var result_671088737 = ({a: 0, b: 0});

    result_671088737 = nimCopy(result_671088737, {a: a_671088733, b: b_671088734}, NTI671088719);

  return result_671088737;

}

function parseStandardFormatSpecifier_1174405178(s_1174405179, start_1174405180, ignoreUnknownSuffix_1174405181) {
      var Temporary1;
      var Temporary2;
      var Temporary3;

  var result_1174405182 = ({fill: 0, align: 0, sign: 0, alternateForm: false, padWithZero: false, minimumWidth: 0, precision: 0, typ: 0, endPosition: 0});

    result_1174405182.fill = 32;
    result_1174405182.align = 0;
    result_1174405182.sign = 45;
    var i_1174405184 = start_1174405180;
    if (((addInt(i_1174405184, 1) < (s_1174405179).length) && (ConstSet19[s_1174405179[chckIndx(addInt(i_1174405184, 1), 0, (s_1174405179).length - 1)]] != undefined))) {
    result_1174405182.fill = s_1174405179[chckIndx(i_1174405184, 0, (s_1174405179).length - 1)];
    result_1174405182.align = s_1174405179[chckIndx(addInt(i_1174405184, 1), 0, (s_1174405179).length - 1)];
    i_1174405184 = addInt(i_1174405184, 2);
    }
    else {
    if (((i_1174405184 < (s_1174405179).length) && (ConstSet20[s_1174405179[chckIndx(i_1174405184, 0, (s_1174405179).length - 1)]] != undefined))) {
    result_1174405182.align = s_1174405179[chckIndx(i_1174405184, 0, (s_1174405179).length - 1)];
    i_1174405184 = addInt(i_1174405184, 1);
    }
    }
    if (((i_1174405184 < (s_1174405179).length) && (ConstSet21[s_1174405179[chckIndx(i_1174405184, 0, (s_1174405179).length - 1)]] != undefined))) {
    result_1174405182.sign = s_1174405179[chckIndx(i_1174405184, 0, (s_1174405179).length - 1)];
    i_1174405184 = addInt(i_1174405184, 1);
    }

    if (((i_1174405184 < (s_1174405179).length) && (s_1174405179[chckIndx(i_1174405184, 0, (s_1174405179).length - 1)] == 35))) {
    result_1174405182.alternateForm = true;
    i_1174405184 = addInt(i_1174405184, 1);
    }

      if (!((addInt(i_1174405184, 1) < (s_1174405179).length) && (s_1174405179[chckIndx(i_1174405184, 0, (s_1174405179).length - 1)] == 48))) Temporary1 = false; else {        Temporary1 = (ConstSet22[s_1174405179[chckIndx(addInt(i_1174405184, 1), 0, (s_1174405179).length - 1)]] != undefined);      }    if (Temporary1) {
    result_1174405182.padWithZero = true;
    i_1174405184 = addInt(i_1174405184, 1);
    }

    var parsedLength_1174405221 = parseSaturatedNatural_503316796(s_1174405179, result_1174405182, "minimumWidth", i_1174405184);
    i_1174405184 = addInt(i_1174405184, parsedLength_1174405221);
    if (((i_1174405184 < (s_1174405179).length) && (s_1174405179[chckIndx(i_1174405184, 0, (s_1174405179).length - 1)] == 46))) {
    i_1174405184 = addInt(i_1174405184, 1);
    var parsedLengthB_1174405230 = parseSaturatedNatural_503316796(s_1174405179, result_1174405182, "precision", i_1174405184);
    i_1174405184 = addInt(i_1174405184, parsedLengthB_1174405230);
    }
    else {
      result_1174405182.precision = -1;
    }

      if (!(i_1174405184 < (s_1174405179).length)) Temporary2 = false; else {        Temporary2 = (ConstSet25[s_1174405179[chckIndx(i_1174405184, 0, (s_1174405179).length - 1)]] != undefined);      }    if (Temporary2) {
    result_1174405182.typ = s_1174405179[chckIndx(i_1174405184, 0, (s_1174405179).length - 1)];
    i_1174405184 = addInt(i_1174405184, 1);
    }

    result_1174405182.endPosition = i_1174405184;
      if (!!((i_1174405184 == (s_1174405179).length))) Temporary3 = false; else {        Temporary3 = !(ignoreUnknownSuffix_1174405181);      }    if (Temporary3) {
    raiseException({message: (makeNimstrLit("invalid format string, cannot parse: ") || []).concat(HEX5BHEX5D_738200730(s_1174405179, HEX2EHEX2E_671088730(i_1174405184, 1)) || []), parent: null, m_type: NTI33555128, name: null, trace: [], up: null}, "ValueError");
    }


  return result_1174405182;

}

function mkDigit_1174405125(v_1174405126, typ_1174405127) {
      var Temporary1;

  var result_1174405128 = [];

    if (!((v_1174405126 < 26))) {
    failedAssertImpl_218103864(makeNimstrLit("strformat.nim:320:9 `v < 26` "));
    }

    if ((v_1174405126 < 10)) {
    result_1174405128 = nimCopy(null, nimCharToStr(chckRange(addInt(48, v_1174405126), 0, 255)), NTI33554439);
    }
    else {
      if ((typ_1174405127 == 120)) {
      Temporary1 = 97;
      }
      else {
      Temporary1 = 65;
      }

      result_1174405128 = nimCopy(null, nimCharToStr(chckRange(subInt(addInt(Temporary1, v_1174405126), 10), 0, 255)), NTI33554439);
    }


  return result_1174405128;

}

function nsuRepeatChar(c_486540280, count_486540281) {
  var result_486540282 = [];

    result_486540282 = nimCopy(null, mnewString(count_486540281), NTI33554439);
    Label1: do {
      var i_486540287 = 0;
      var colontmp__822088858 = 0;
      colontmp__822088858 = subInt(count_486540281, 1);
      var res_822088859 = 0;
      Label2: do {
          Label3: while (true) {
          if (!(res_822088859 <= colontmp__822088858)) break Label3;
            i_486540287 = res_822088859;
            result_486540282[chckIndx(i_486540287, 0, (result_486540282).length - 1)] = c_486540280;
            res_822088859 = addInt(res_822088859, 1);
          }
      } while (false);
    } while (false);

  return result_486540282;

}

function formatInt_822087468(n_822087470, radix_822087471, spec_822087472) {
    var Temporary1;
    var Temporary8;

  var result_822087473 = [];

    var n_822087476 = n_822087470;
    var negative_822087477 = (n_822087476 < 0);
    if (negative_822087477) {
    Temporary1 = ((~(n_822087476) + 1) );
    }
    else {
    Temporary1 = n_822087476;
    }

    var v_822087478 = Temporary1;
    var xx_822087479 = [];
    if (spec_822087472.alternateForm) {
    switch (spec_822087472.typ) {
    case 88:
      xx_822087479 = nimCopy(null, makeNimstrLit("0x"), NTI33554439);
      break;
    case 120:
      xx_822087479 = nimCopy(null, makeNimstrLit("0x"), NTI33554439);
      break;
    case 98:
      xx_822087479 = nimCopy(null, makeNimstrLit("0b"), NTI33554439);
      break;
    case 111:
      xx_822087479 = nimCopy(null, makeNimstrLit("0o"), NTI33554439);
      break;
    default:
      break;
    }
    }

    if ((v_822087478 == 0)) {
    result_822087473 = nimCopy(null, makeNimstrLit("0"), NTI33554439);
    }
    else {
      result_822087473 = nimCopy(null, [], NTI33554439);
      Label2: do {
          Label3: while (true) {
          if (!(0 < v_822087478)) break Label3;
            var d_822087480 = (v_822087478 % radix_822087471);
            v_822087478 = Math.trunc(((v_822087478 / radix_822087471) ));
            result_822087473.push.apply(result_822087473, mkDigit_1174405125(chckRange(d_822087480, -2147483648, 2147483647), spec_822087472.typ));;
          }
      } while (false);
      Label4: do {
        var idx_822087485 = 0;
        var colontmp__822088850 = 0;
        colontmp__822088850 = divInt((result_822087473).length, 2);
        var i_822088851 = 0;
        Label5: do {
            Label6: while (true) {
            if (!(i_822088851 < colontmp__822088850)) break Label6;
              idx_822087485 = i_822088851;
              var Temporary7 = result_822087473[chckIndx(idx_822087485, 0, (result_822087473).length - 1)]; result_822087473[chckIndx(idx_822087485, 0, (result_822087473).length - 1)] = result_822087473[chckIndx(subInt(subInt((result_822087473).length, idx_822087485), 1), 0, (result_822087473).length - 1)]; result_822087473[chckIndx(subInt(subInt((result_822087473).length, idx_822087485), 1), 0, (result_822087473).length - 1)] = Temporary7;              i_822088851 = addInt(i_822088851, 1);
            }
        } while (false);
      } while (false);
    }

    if (spec_822087472.padWithZero) {
    if (negative_822087477) Temporary8 = true; else {      Temporary8 = !((spec_822087472.sign == 45));    }    var sign_822087490 = Temporary8;
    var toFill_822087494 = subInt(subInt(subInt(spec_822087472.minimumWidth, (result_822087473).length), (xx_822087479).length), (sign_822087490 ? 1 : 0));
    if ((0 < toFill_822087494)) {
    result_822087473 = nimCopy(null, (nsuRepeatChar(48, chckRange(toFill_822087494, 0, 2147483647)) || []).concat(result_822087473 || []), NTI33554439);
    }

    }

    if (negative_822087477) {
    result_822087473 = nimCopy(null, (makeNimstrLit("-") || []).concat(xx_822087479 || [],result_822087473 || []), NTI33554439);
    }
    else {
    if (!((spec_822087472.sign == 45))) {
    result_822087473 = nimCopy(null, [spec_822087472.sign].concat(xx_822087479 || [],result_822087473 || []), NTI33554439);
    }
    else {
      result_822087473 = nimCopy(null, (xx_822087479 || []).concat(result_822087473 || []), NTI33554439);
    }
    }
    if ((spec_822087472.align == 60)) {
    Label9: do {
      var i_822087499 = 0;
      var colontmp__822088854 = 0;
      colontmp__822088854 = (result_822087473).length;
      var i_822088855 = colontmp__822088854;
      Label10: do {
          Label11: while (true) {
          if (!(i_822088855 < spec_822087472.minimumWidth)) break Label11;
            i_822087499 = i_822088855;
            addChar(result_822087473, spec_822087472.fill);;
            i_822088855 = addInt(i_822088855, 1);
          }
      } while (false);
    } while (false);
    }
    else {
      var toFill_822087500 = subInt(spec_822087472.minimumWidth, (result_822087473).length);
      if ((spec_822087472.align == 94)) {
      var half_822087501 = divInt(toFill_822087500, 2);
      result_822087473 = nimCopy(null, (nsuRepeatChar(spec_822087472.fill, chckRange(half_822087501, 0, 2147483647)) || []).concat(result_822087473 || [],nsuRepeatChar(spec_822087472.fill, chckRange(subInt(toFill_822087500, half_822087501), 0, 2147483647)) || []), NTI33554439);
      }
      else {
        if ((0 < toFill_822087500)) {
        result_822087473 = nimCopy(null, (nsuRepeatChar(spec_822087472.fill, chckRange(toFill_822087500, 0, 2147483647)) || []).concat(result_822087473 || []), NTI33554439);
        }

      }

    }


  return result_822087473;

}

function formatValue_822087460(result_822087462, result_822087462_Idx, value_822087463, specifier_822087464) {
  BeforeRet: do {
    if (((specifier_822087464).length == 0)) {
    result_822087462[result_822087462_Idx].push.apply(result_822087462[result_822087462_Idx], HEX24_352321539(value_822087463));;
    break BeforeRet;
    }

    var spec_822087465 = parseStandardFormatSpecifier_1174405178(specifier_822087464, 0, false);
    var radix_822087466 = 10;
    switch (spec_822087465.typ) {
    case 120:
    case 88:
      radix_822087466 = 16;
      break;
    case 100:
    case 0:
      break;
    case 98:
      radix_822087466 = 2;
      break;
    case 111:
      radix_822087466 = 8;
      break;
    default:
      raiseException({message: (makeNimstrLit("invalid type in format string for number, expected one  of \'x\', \'X\', \'b\', \'d\', \'o\' but got: ") || []).concat([spec_822087465.typ]), parent: null, m_type: NTI33555128, name: null, trace: [], up: null}, "ValueError");
      break;
    }
    result_822087462[result_822087462_Idx].push.apply(result_822087462[result_822087462_Idx], formatInt_822087468(value_822087463, radix_822087466, spec_822087465));;
  } while (false);


}

function nucruneLen(s_738197514) {
  var result_738197515 = 0;

    result_738197515 = 0;
    var i_738197516 = 0;
    Label1: do {
        Label2: while (true) {
        if (!(i_738197516 < (s_738197514).length)) break Label2;
          if ((s_738197514[chckIndx(i_738197516, 0, (s_738197514).length - 1)] <= 127)) {
          i_738197516 = addInt(i_738197516, 1);
          }
          else {
          if (((s_738197514[chckIndx(i_738197516, 0, (s_738197514).length - 1)] >>> 5) == 6)) {
          i_738197516 = addInt(i_738197516, 2);
          }
          else {
          if (((s_738197514[chckIndx(i_738197516, 0, (s_738197514).length - 1)] >>> 4) == 14)) {
          i_738197516 = addInt(i_738197516, 3);
          }
          else {
          if (((s_738197514[chckIndx(i_738197516, 0, (s_738197514).length - 1)] >>> 3) == 30)) {
          i_738197516 = addInt(i_738197516, 4);
          }
          else {
          if (((s_738197514[chckIndx(i_738197516, 0, (s_738197514).length - 1)] >>> 2) == 62)) {
          i_738197516 = addInt(i_738197516, 5);
          }
          else {
          if (((s_738197514[chckIndx(i_738197516, 0, (s_738197514).length - 1)] >>> 1) == 126)) {
          i_738197516 = addInt(i_738197516, 6);
          }
          else {
          i_738197516 = addInt(i_738197516, 1);
          }
          }}}}}
          result_738197515 = addInt(result_738197515, 1);
        }
    } while (false);

  return result_738197515;

}

function runeLenAt_738197569(s_738197570, i_738197571) {
  var result_738197572 = 0;

    if ((s_738197570[chckIndx(i_738197571, 0, (s_738197570).length - 1)] <= 127)) {
    result_738197572 = 1;
    }
    else {
    if (((s_738197570[chckIndx(i_738197571, 0, (s_738197570).length - 1)] >>> 5) == 6)) {
    result_738197572 = 2;
    }
    else {
    if (((s_738197570[chckIndx(i_738197571, 0, (s_738197570).length - 1)] >>> 4) == 14)) {
    result_738197572 = 3;
    }
    else {
    if (((s_738197570[chckIndx(i_738197571, 0, (s_738197570).length - 1)] >>> 3) == 30)) {
    result_738197572 = 4;
    }
    else {
    if (((s_738197570[chckIndx(i_738197571, 0, (s_738197570).length - 1)] >>> 2) == 62)) {
    result_738197572 = 5;
    }
    else {
    if (((s_738197570[chckIndx(i_738197571, 0, (s_738197570).length - 1)] >>> 1) == 126)) {
    result_738197572 = 6;
    }
    else {
      result_738197572 = 1;
    }
    }}}}}

  return result_738197572;

}

function runeOffset_738198141(s_738198142, pos_738198143, start_738198144) {
  var result_738198145 = 0;

  BeforeRet: do {
    var i_738198146 = 0;
    var o_738198147 = start_738198144;
    Label1: do {
        Label2: while (true) {
        if (!(i_738198146 < pos_738198143)) break Label2;
          o_738198147 = addInt(o_738198147, chckRange(runeLenAt_738197569(s_738198142, o_738198147), 0, 2147483647));
          if (((s_738198142).length <= o_738198147)) {
          result_738198145 = -1;
          break BeforeRet;
          }

          i_738198146 = addInt(i_738198146, 1);
        }
    } while (false);
    result_738198145 = o_738198147;
    break BeforeRet;
  } while (false);

  return result_738198145;

}

function validateUtf8_738197781(s_738197782) {
            var Temporary3;
            var Temporary4;
            var Temporary5;
            var Temporary6;
            var Temporary7;
            var Temporary8;

  var result_738197783 = 0;

  BeforeRet: do {
    var i_738197784 = 0;
    var L_738197785 = (s_738197782).length;
    Label1: do {
        Label2: while (true) {
        if (!(i_738197784 < L_738197785)) break Label2;
          if ((s_738197782[chckIndx(i_738197784, 0, (s_738197782).length - 1)] <= 127)) {
          i_738197784 = addInt(i_738197784, 1);
          }
          else {
          if (((s_738197782[chckIndx(i_738197784, 0, (s_738197782).length - 1)] >>> 5) == 6)) {
          if ((s_738197782[chckIndx(i_738197784, 0, (s_738197782).length - 1)] < 194)) {
          result_738197783 = i_738197784;
          break BeforeRet;
          }

            if (!(addInt(i_738197784, 1) < L_738197785)) Temporary3 = false; else {              Temporary3 = ((s_738197782[chckIndx(addInt(i_738197784, 1), 0, (s_738197782).length - 1)] >>> 6) == 2);            }          if (Temporary3) {
          i_738197784 = addInt(i_738197784, 2);
          }
          else {
            result_738197783 = i_738197784;
            break BeforeRet;
          }

          }
          else {
          if (((s_738197782[chckIndx(i_738197784, 0, (s_738197782).length - 1)] >>> 4) == 14)) {
            if (!(addInt(i_738197784, 2) < L_738197785)) Temporary5 = false; else {              Temporary5 = ((s_738197782[chckIndx(addInt(i_738197784, 1), 0, (s_738197782).length - 1)] >>> 6) == 2);            }            if (!Temporary5) Temporary4 = false; else {              Temporary4 = ((s_738197782[chckIndx(addInt(i_738197784, 2), 0, (s_738197782).length - 1)] >>> 6) == 2);            }          if (Temporary4) {
          i_738197784 = addInt(i_738197784, 3);
          }
          else {
            result_738197783 = i_738197784;
            break BeforeRet;
          }

          }
          else {
          if (((s_738197782[chckIndx(i_738197784, 0, (s_738197782).length - 1)] >>> 3) == 30)) {
            if (!(addInt(i_738197784, 3) < L_738197785)) Temporary8 = false; else {              Temporary8 = ((s_738197782[chckIndx(addInt(i_738197784, 1), 0, (s_738197782).length - 1)] >>> 6) == 2);            }            if (!Temporary8) Temporary7 = false; else {              Temporary7 = ((s_738197782[chckIndx(addInt(i_738197784, 2), 0, (s_738197782).length - 1)] >>> 6) == 2);            }            if (!Temporary7) Temporary6 = false; else {              Temporary6 = ((s_738197782[chckIndx(addInt(i_738197784, 3), 0, (s_738197782).length - 1)] >>> 6) == 2);            }          if (Temporary6) {
          i_738197784 = addInt(i_738197784, 4);
          }
          else {
            result_738197783 = i_738197784;
            break BeforeRet;
          }

          }
          else {
            result_738197783 = i_738197784;
            break BeforeRet;
          }
          }}}
        }
    } while (false);
    result_738197783 = -1;
    break BeforeRet;
  } while (false);

  return result_738197783;

}

function alignString_1174405140(s_1174405141, minimumWidth_1174405142, align_1174405143, fill_1174405144) {
      var Temporary1;

  var result_1174405145 = [];

    if ((minimumWidth_1174405142 == 0)) {
    result_1174405145 = nimCopy(null, s_1174405141, NTI33554439);
    }
    else {
      if ((validateUtf8_738197781(s_1174405141) == -1)) {
      Temporary1 = nucruneLen(s_1174405141);
      }
      else {
      Temporary1 = (s_1174405141).length;
      }

      var sRuneLen_1174405146 = Temporary1;
      var toFill_1174405147 = subInt(minimumWidth_1174405142, sRuneLen_1174405146);
      if ((toFill_1174405147 <= 0)) {
      result_1174405145 = nimCopy(null, s_1174405141, NTI33554439);
      }
      else {
      if (((align_1174405143 == 60) || (align_1174405143 == 0))) {
      result_1174405145 = nimCopy(null, (s_1174405141 || []).concat(nsuRepeatChar(fill_1174405144, chckRange(toFill_1174405147, 0, 2147483647)) || []), NTI33554439);
      }
      else {
      if ((align_1174405143 == 94)) {
      var half_1174405148 = divInt(toFill_1174405147, 2);
      result_1174405145 = nimCopy(null, (nsuRepeatChar(fill_1174405144, chckRange(half_1174405148, 0, 2147483647)) || []).concat(s_1174405141 || [],nsuRepeatChar(fill_1174405144, chckRange(subInt(toFill_1174405147, half_1174405148), 0, 2147483647)) || []), NTI33554439);
      }
      else {
        result_1174405145 = nimCopy(null, (nsuRepeatChar(fill_1174405144, chckRange(toFill_1174405147, 0, 2147483647)) || []).concat(s_1174405141 || []), NTI33554439);
      }
      }}
    }


  return result_1174405145;

}

function formatValue_1174405282(result_1174405283, result_1174405283_Idx, value_1174405284, specifier_1174405285) {
    var spec_1174405286 = parseStandardFormatSpecifier_1174405178(specifier_1174405285, 0, false);
    var value_1174405287 = nimCopy(null, value_1174405284, NTI33554439);
    switch (spec_1174405286.typ) {
    case 115:
    case 0:
      break;
    default:
      raiseException({message: (makeNimstrLit("invalid type in format string for string, expected \'s\', but got ") || []).concat([spec_1174405286.typ]), parent: null, m_type: NTI33555128, name: null, trace: [], up: null}, "ValueError");
      break;
    }
    if (!((spec_1174405286.precision == -1))) {
    if ((spec_1174405286.precision < nucruneLen(value_1174405287))) {
    (value_1174405287.length = chckRange(runeOffset_738198141(value_1174405287, chckRange(spec_1174405286.precision, 0, 2147483647), 0), 0, 2147483647));
    }

    }

    result_1174405283[result_1174405283_Idx].push.apply(result_1174405283[result_1174405283_Idx], alignString_1174405140(value_1174405287, spec_1174405286.minimumWidth, spec_1174405286.align, spec_1174405286.fill));;


}

function isNimException_33556519() {
    return lastJSError && lastJSError.m_type;


}

function getCurrentExceptionMsg_33556532() {
  var result_33556533 = [];

  BeforeRet: do {
    if (!((lastJSError == null))) {
    if (isNimException_33556519()) {
    result_33556533 = nimCopy(null, lastJSError.message, NTI33554439);
    break BeforeRet;
    }
    else {
      var msg_33556538 = null;
            if (lastJSError.message !== undefined) {
        msg_33556538 = lastJSError.message;
      }

      if (!((msg_33556538 == null))) {
      result_33556533 = nimCopy(null, cstrToNimstr(msg_33556538), NTI33554439);
      break BeforeRet;
      }

    }

    }

    result_33556533 = nimCopy(null, [], NTI33554439);
    break BeforeRet;
  } while (false);

  return result_33556533;

}

function rawGet_822083819(t_822083822, key_822083823, hc_822083824, hc_822083824_Idx) {
            var Temporary3;

  var result_822083825 = 0;

  BeforeRet: do {
    hc_822083824[hc_822083824_Idx] = hash_1040187860(key_822083823);
    if ((hc_822083824[hc_822083824_Idx] == 0)) {
    hc_822083824[hc_822083824_Idx] = 314159265;
    }

    if (((t_822083822.data).length == 0)) {
    result_822083825 = -1;
    break BeforeRet;
    }

    var h_822083877 = (hc_822083824[hc_822083824_Idx] & (t_822083822.data).length - 1);
    Label1: do {
        Label2: while (true) {
        if (!isFilled_1023410206(t_822083822.data[chckIndx(h_822083877, 0, (t_822083822.data).length - 1)].Field0)) break Label2;
            if (!(t_822083822.data[chckIndx(h_822083877, 0, (t_822083822.data).length - 1)].Field0 == hc_822083824[hc_822083824_Idx])) Temporary3 = false; else {              Temporary3 = (t_822083822.data[chckIndx(h_822083877, 0, (t_822083822.data).length - 1)].Field1 == key_822083823);            }          if (Temporary3) {
          result_822083825 = h_822083877;
          break BeforeRet;
          }

          h_822083877 = nextTry_1023410209(h_822083877, (t_822083822.data).length - 1);
        }
    } while (false);
    result_822083825 = subInt(-1, h_822083877);
  } while (false);

  return result_822083825;

}

function hasKey_822083812(t_822083815, key_822083816) {
  var result_822083817 = false;

    var hc_822083818 = [0];
    result_822083817 = (0 <= rawGet_822083819(t_822083815, key_822083816, hc_822083818, 0));

  return result_822083817;

}

function HEX5BHEX5D_822084102(t_822084105, key_822084106) {
  var result_822084107 = null;

    var hcHEX60gensym22_822084108 = [0];
    var indexHEX60gensym22_822084115 = rawGet_822083819(t_822084105, key_822084106, hcHEX60gensym22_822084108, 0);
    if ((0 <= indexHEX60gensym22_822084115)) {
    result_822084107 = t_822084105.data[chckIndx(indexHEX60gensym22_822084115, 0, (t_822084105.data).length - 1)].Field2;
    }
    else {
    raiseKeyError_822084169(key_822084106);
    }


  return result_822084107;

}

function getSessionState_822083768(sessionId_822083769, state_822083770) {
    var Temporary1;

  var result_822083771 = false;

    if (hasKey_822083812(sessionsById_822083705[0], sessionId_822083769)) {
    state_822083770 = nimCopy(state_822083770, HEX5BHEX5D_822084102(sessionsById_822083705[0], sessionId_822083769), NTI822083627);
    Temporary1 = true;
    }
    else {
    Temporary1 = false;
    }

    result_822083771 = Temporary1;

  return result_822083771;

}

function HEX5BHEX5D_738198380(s_738198383, x_738198384) {
  var result_738198385 = [];

    var a_738198387 = x_738198384.a;
    var L_738198389 = addInt(subInt(x_738198384.b, a_738198387), 1);
    result_738198385 = nimCopy(null, mnewString(chckRange(L_738198389, 0, 2147483647)), NTI33554439);
    Label1: do {
      var i_738198394 = 0;
      var i_822088896 = 0;
      Label2: do {
          Label3: while (true) {
          if (!(i_822088896 < L_738198389)) break Label3;
            i_738198394 = i_822088896;
            result_738198385[chckIndx(i_738198394, 0, (result_738198385).length - 1)] = s_738198383[chckIndx(addInt(i_738198394, a_738198387), 0, (s_738198383).length - 1)];
            i_822088896 = addInt(i_822088896, 1);
          }
      } while (false);
    } while (false);

  return result_738198385;

}

function HEX2EHEX2E_738198355(a_738198358, b_738198359) {
  var result_738198360 = ({a: 0, b: 0});

    result_738198360 = nimCopy(result_738198360, {a: a_738198358, b: b_738198359}, NTI536870973);

  return result_738198360;

}

function toolCallIdFrom_822085262(updateObj_822085263) {
    var Temporary1;

  var result_822085264 = null;

    if (updateObj_822085263.hasOwnProperty("toolCallId")) {
    Temporary1 = (updateObj_822085263["toolCallId"]);
    }
    else {
    if (updateObj_822085263.hasOwnProperty("id")) {
    Temporary1 = (updateObj_822085263["id"]);
    }
    else {
    if (updateObj_822085263.hasOwnProperty("callId")) {
    Temporary1 = (updateObj_822085263["callId"]);
    }
    else {
    Temporary1 = "";
    }
    }}
    result_822085264 = Temporary1;

  return result_822085264;

}

function nsuStartsWith(s_486540574, prefix_486540575) {
            var Temporary3;

  var result_486540576 = false;

  BeforeRet: do {
    var prefixLenHEX60gensym138_486540581 = (prefix_486540575).length;
    var sLenHEX60gensym138_486540582 = (s_486540574).length;
    var iHEX60gensym138_486540583 = 0;
    Label1: do {
        Label2: while (true) {
        if (!true) break Label2;
          if ((prefixLenHEX60gensym138_486540581 <= iHEX60gensym138_486540583)) {
          result_486540576 = true;
          break BeforeRet;
          }

            if ((sLenHEX60gensym138_486540582 <= iHEX60gensym138_486540583)) Temporary3 = true; else {              Temporary3 = !((s_486540574[chckIndx(iHEX60gensym138_486540583, 0, (s_486540574).length - 1)] == prefix_486540575[chckIndx(iHEX60gensym138_486540583, 0, (prefix_486540575).length - 1)]));            }          if (Temporary3) {
          result_486540576 = false;
          break BeforeRet;
          }

          iHEX60gensym138_486540583 = addInt(iHEX60gensym138_486540583, 1);
        }
    } while (false);
  } while (false);

  return result_486540576;

}

function nsuStrip(s_486541511, leading_486541512, trailing_486541513, chars_486541514) {
          var Temporary5;

  var result_486541515 = [];

    var first_486541516 = 0;
    var last_486541517 = subInt((s_486541511).length, 1);
    if (leading_486541512) {
    Label1: do {
        Label2: while (true) {
        if (!((first_486541516 <= last_486541517) && (chars_486541514[s_486541511[chckIndx(first_486541516, 0, (s_486541511).length - 1)]] != undefined))) break Label2;
          first_486541516 = addInt(first_486541516, 1);
        }
    } while (false);
    }

    if (trailing_486541513) {
    Label3: do {
        Label4: while (true) {
          if (!(first_486541516 <= last_486541517)) Temporary5 = false; else {            Temporary5 = (chars_486541514[s_486541511[chckIndx(last_486541517, 0, (s_486541511).length - 1)]] != undefined);          }        if (!Temporary5) break Label4;
          last_486541517 = subInt(last_486541517, 1);
        }
    } while (false);
    }

    result_486541515 = nimCopy(null, substr_33557906(s_486541511, first_486541516, last_486541517), NTI33554439);

  return result_486541515;

}

function substr_33557918(s_33557919, first_33557920) {
  var result_33557921 = [];

    result_33557921 = nimCopy(null, substr_33557906(s_33557919, first_33557920, (s_33557919).length - 1), NTI33554439);

  return result_33557921;

}

function extractPathFromUpdate_822085355(updateObj_822085356) {
            var Temporary6;
              var Temporary11;

  var result_822085357 = null;

  BeforeRet: do {
    if (updateObj_822085356.hasOwnProperty("path")) {
    result_822085357 = (updateObj_822085356["path"]);
    break BeforeRet;
    }

    if (updateObj_822085356.hasOwnProperty("rawInput")) {
    var rawIn_822085362 = updateObj_822085356["rawInput"];
    if (rawIn_822085362.hasOwnProperty("filePath")) {
    result_822085357 = (rawIn_822085362["filePath"]);
    break BeforeRet;
    }

    if (rawIn_822085362.hasOwnProperty("filepath")) {
    result_822085357 = (rawIn_822085362["filepath"]);
    break BeforeRet;
    }

    if (rawIn_822085362.hasOwnProperty("path")) {
    result_822085357 = (rawIn_822085362["path"]);
    break BeforeRet;
    }

    if (rawIn_822085362.hasOwnProperty("content")) {
    var patchText_822085379 = (rawIn_822085362["content"]);
    Label1: do {
      var line_822085380 = [];
      var colontmp__822088899 = [];
      colontmp__822088899 = cstrToNimstr(patchText_822085379);
      var first_822088902 = 0;
      var last_822088903 = 0;
      var eolpos_822088904 = 0;
      Label2: do {
          Label3: while (true) {
          if (!true) break Label3;
            Label4: do {
                Label5: while (true) {
                if (!((last_822088903 < (colontmp__822088899).length) && !((ConstSet26[colontmp__822088899[chckIndx(last_822088903, 0, (colontmp__822088899).length - 1)]] != undefined)))) break Label5;
                  last_822088903 = addInt(last_822088903, 1);
                }
            } while (false);
            eolpos_822088904 = last_822088903;
            if ((last_822088903 < (colontmp__822088899).length)) {
            if ((colontmp__822088899[chckIndx(last_822088903, 0, (colontmp__822088899).length - 1)] == 10)) {
            last_822088903 = addInt(last_822088903, 1);
            }
            else {
            if ((colontmp__822088899[chckIndx(last_822088903, 0, (colontmp__822088899).length - 1)] == 13)) {
            last_822088903 = addInt(last_822088903, 1);
            if (((last_822088903 < (colontmp__822088899).length) && (colontmp__822088899[chckIndx(last_822088903, 0, (colontmp__822088899).length - 1)] == 10))) {
            last_822088903 = addInt(last_822088903, 1);
            }

            }
            }
            }

            if (false) {
            Temporary6 = subInt(last_822088903, 1);
            }
            else {
            Temporary6 = subInt(eolpos_822088904, 1);
            }

            line_822085380 = substr_33557906(colontmp__822088899, first_822088902, Temporary6);
            if (nsuStartsWith(line_822085380, makeNimstrLit("*** Update File: "))) {
            result_822085357 = toJSStr(nsuStrip(substr_33557918(line_822085380, 17), true, true, ConstSet27));
            break BeforeRet;
            }

            if (nsuStartsWith(line_822085380, makeNimstrLit("*** Add File: "))) {
            result_822085357 = toJSStr(nsuStrip(substr_33557918(line_822085380, 14), true, true, ConstSet28));
            break BeforeRet;
            }

            if ((eolpos_822088904 == last_822088903)) {
            break Label2;
            }

            first_822088902 = last_822088903;
          }
      } while (false);
    } while (false);
    }

    }

    if (updateObj_822085356.hasOwnProperty("content")) {
    var contentObj_822085381 = updateObj_822085356["content"];
++excHandler;
    try {
    var items_822085386 = (contentObj_822085381);
    Label8: do {
      var item_822085390 = null;
      var i_822088908 = 0;
      var L_822088909 = (items_822085386).length;
      Label9: do {
          Label10: while (true) {
          if (!(i_822088908 < L_822088909)) break Label10;
            item_822085390 = items_822085386[chckIndx(i_822088908, 0, (items_822085386).length - 1)];
            if (item_822085390.hasOwnProperty("path")) {
            result_822085357 = (item_822085390["path"]);
            break BeforeRet;
            }

            if (item_822085390.hasOwnProperty("filePath")) {
            result_822085357 = (item_822085390["filePath"]);
            break BeforeRet;
            }

            if (item_822085390.hasOwnProperty("name")) {
            result_822085357 = (item_822085390["name"]);
            break BeforeRet;
            }

              if (!item_822085390.hasOwnProperty("location")) Temporary11 = false; else {                Temporary11 = item_822085390["location"].hasOwnProperty("path");              }            if (Temporary11) {
            result_822085357 = (item_822085390["location"]["path"]);
            break BeforeRet;
            }

            i_822088908 = addInt(i_822088908, 1);
            if (!(((items_822085386).length == L_822088909))) {
            failedAssertImpl_218103864(makeNimstrLit("iterators.nim:240:11 `len(a) == L` the length of the seq changed while iterating over it"));
            }

          }
      } while (false);
    } while (false);
--excHandler;
} catch (EXCEPTION) {
 var prevJSError = lastJSError;
 lastJSError = EXCEPTION;
 --excHandler;
    lastJSError = prevJSError;
    } finally {
    }
    if (contentObj_822085381.hasOwnProperty("path")) {
    result_822085357 = (contentObj_822085381["path"]);
    break BeforeRet;
    }

    }

    if (updateObj_822085356.hasOwnProperty("rawOutput")) {
    var rawOut_822085411 = updateObj_822085356["rawOutput"];
    if ((rawOut_822085411.hasOwnProperty("filediff") && rawOut_822085411["filediff"].hasOwnProperty("file"))) {
    result_822085357 = (rawOut_822085411["filediff"]["file"]);
    break BeforeRet;
    }

    }

    result_822085357 = "";
  } while (false);

  return result_822085357;

}

function rawGet_822085577(t_822085580, key_822085581, hc_822085582, hc_822085582_Idx) {
            var Temporary3;

  var result_822085583 = 0;

  BeforeRet: do {
    hc_822085582[hc_822085582_Idx] = hash_1040187860(key_822085581);
    if ((hc_822085582[hc_822085582_Idx] == 0)) {
    hc_822085582[hc_822085582_Idx] = 314159265;
    }

    if (((t_822085580.data).length == 0)) {
    result_822085583 = -1;
    break BeforeRet;
    }

    var h_822085635 = (hc_822085582[hc_822085582_Idx] & (t_822085580.data).length - 1);
    Label1: do {
        Label2: while (true) {
        if (!isFilled_1023410206(t_822085580.data[chckIndx(h_822085635, 0, (t_822085580.data).length - 1)].Field0)) break Label2;
            if (!(t_822085580.data[chckIndx(h_822085635, 0, (t_822085580.data).length - 1)].Field0 == hc_822085582[hc_822085582_Idx])) Temporary3 = false; else {              Temporary3 = (t_822085580.data[chckIndx(h_822085635, 0, (t_822085580.data).length - 1)].Field1 == key_822085581);            }          if (Temporary3) {
          result_822085583 = h_822085635;
          break BeforeRet;
          }

          h_822085635 = nextTry_1023410209(h_822085635, (t_822085580.data).length - 1);
        }
    } while (false);
    result_822085583 = subInt(-1, h_822085635);
  } while (false);

  return result_822085583;

}

function hasKey_822085570(t_822085573, key_822085574) {
  var result_822085575 = false;

    var hc_822085576 = [0];
    result_822085575 = (0 <= rawGet_822085577(t_822085573, key_822085574, hc_822085576, 0));

  return result_822085575;

}

function mustRehash_822086034(t_822086036) {
  var result_822086037 = false;

    if (!((t_822086036.counter < (t_822086036.data).length))) {
    failedAssertImpl_218103864(makeNimstrLit("hashcommon.nim:29:9 `\x0At.counter < t.dataLen` "));
    }

    result_822086037 = ((mulInt((t_822086036.data).length, 2) < mulInt(t_822086036.counter, 3)) || (subInt((t_822086036.data).length, t_822086036.counter) < 4));

  return result_822086037;

}

function rawInsert_822086483(t_822086487, data_822086488, data_822086488_Idx, key_822086489, val_822086490, hc_822086491, h_822086492) {
    data_822086488[data_822086488_Idx][chckIndx(h_822086492, 0, (data_822086488[data_822086488_Idx]).length - 1)].Field1 = key_822086489;
    data_822086488[data_822086488_Idx][chckIndx(h_822086492, 0, (data_822086488[data_822086488_Idx]).length - 1)].Field2 = nimCopy(data_822086488[data_822086488_Idx][chckIndx(h_822086492, 0, (data_822086488[data_822086488_Idx]).length - 1)].Field2, val_822086490, NTI822083625);
    data_822086488[data_822086488_Idx][chckIndx(h_822086492, 0, (data_822086488[data_822086488_Idx]).length - 1)].Field0 = hc_822086491;


}

function enlarge_822086189(t_822086192) {
    var n_822086195 = [];
    n_822086195 = new Array(chckRange(mulInt((t_822086192.data).length, 2), 0, 2147483647)); for (var i = 0 ; i < chckRange(mulInt((t_822086192.data).length, 2), 0, 2147483647) ; ++i) { n_822086195[i] = {Field0: 0, Field1: null, Field2: ({path: null, content: null})}; }    var Temporary1 = t_822086192.data; t_822086192.data = n_822086195; n_822086195 = Temporary1;    Label2: do {
      var i_822086259 = 0;
      var colontmp__822088917 = 0;
      colontmp__822088917 = (n_822086195).length - 1;
      var res_822088919 = 0;
      Label3: do {
          Label4: while (true) {
          if (!(res_822088919 <= colontmp__822088917)) break Label4;
            i_822086259 = res_822088919;
            var eh_822086313 = n_822086195[chckIndx(i_822086259, 0, (n_822086195).length - 1)].Field0;
            if (isFilled_1023410206(eh_822086313)) {
            var j_822086317 = (eh_822086313 & (t_822086192.data).length - 1);
            Label5: do {
                Label6: while (true) {
                if (!isFilled_1023410206(t_822086192.data[chckIndx(j_822086317, 0, (t_822086192.data).length - 1)].Field0)) break Label6;
                  j_822086317 = nextTry_1023410209(j_822086317, (t_822086192.data).length - 1);
                }
            } while (false);
            rawInsert_822086483(t_822086192, t_822086192, "data", n_822086195[chckIndx(i_822086259, 0, (n_822086195).length - 1)].Field1, n_822086195[chckIndx(i_822086259, 0, (n_822086195).length - 1)].Field2, eh_822086313, j_822086317);
            }

            res_822088919 = addInt(res_822088919, 1);
          }
      } while (false);
    } while (false);


}

function rawGetKnownHC_822086661(t_822086664, key_822086665, hc_822086666) {
  var result_822086667 = 0;

  BeforeRet: do {
    if (((t_822086664.data).length == 0)) {
    result_822086667 = -1;
    break BeforeRet;
    }

    var h_822086718 = (hc_822086666 & (t_822086664.data).length - 1);
    Label1: do {
        Label2: while (true) {
        if (!isFilled_1023410206(t_822086664.data[chckIndx(h_822086718, 0, (t_822086664.data).length - 1)].Field0)) break Label2;
          if (((t_822086664.data[chckIndx(h_822086718, 0, (t_822086664.data).length - 1)].Field0 == hc_822086666) && (t_822086664.data[chckIndx(h_822086718, 0, (t_822086664.data).length - 1)].Field1 == key_822086665))) {
          result_822086667 = h_822086718;
          break BeforeRet;
          }

          h_822086718 = nextTry_1023410209(h_822086718, (t_822086664.data).length - 1);
        }
    } while (false);
    result_822086667 = subInt(-1, h_822086718);
  } while (false);

  return result_822086667;

}

function HEX5BHEX5DHEX3D_822085861(t_822085864, key_822085865, val_822085866) {
    if (((t_822085864.data).length == 0)) {
    var correctSizeHEX60gensym33_822085915 = slotsNeeded_1023410217(32);
    t_822085864.counter = 0;
    t_822085864.data = new Array(chckRange(correctSizeHEX60gensym33_822085915, 0, 2147483647)); for (var i = 0 ; i < chckRange(correctSizeHEX60gensym33_822085915, 0, 2147483647) ; ++i) { t_822085864.data[i] = {Field0: 0, Field1: null, Field2: ({path: null, content: null})}; }    }

    var hc_822085920 = [0];
    var index_822085927 = rawGet_822085577(t_822085864, key_822085865, hc_822085920, 0);
    if ((0 <= index_822085927)) {
    t_822085864.data[chckIndx(index_822085927, 0, (t_822085864.data).length - 1)].Field2 = nimCopy(t_822085864.data[chckIndx(index_822085927, 0, (t_822085864.data).length - 1)].Field2, val_822085866, NTI822083625);
    }
    else {
      if (((t_822085864.data).length == 0)) {
      var correctSizeHEX60gensym36_822086029 = slotsNeeded_1023410217(32);
      t_822085864.counter = 0;
      t_822085864.data = new Array(chckRange(correctSizeHEX60gensym36_822086029, 0, 2147483647)); for (var i = 0 ; i < chckRange(correctSizeHEX60gensym36_822086029, 0, 2147483647) ; ++i) { t_822085864.data[i] = {Field0: 0, Field1: null, Field2: ({path: null, content: null})}; }      }

      if (mustRehash_822086034(t_822085864)) {
      enlarge_822086189(t_822085864);
      index_822085927 = rawGetKnownHC_822086661(t_822085864, key_822085865, hc_822085920[0]);
      }

      index_822085927 = subInt(-1, index_822085927);
      rawInsert_822086483(t_822085864, t_822085864, "data", key_822085865, val_822085866, hc_822085920[0], index_822085927);
      t_822085864.counter = addInt(t_822085864.counter, 1);
    }



}
async function capturePreImage_822085519(state_822085520, toolCallId_822085521, path_822085522) {
  var result_822085524 = null;

  BeforeRet: do {
    if (((((toolCallId_822085521) == null ? 0 : (toolCallId_822085521).length) == 0) || (((path_822085522) == null ? 0 : (path_822085522).length) == 0))) {
    result_822085524 = undefined;
    break BeforeRet;
    }

    if (hasKey_822085570(state_822085520.toolPreImages, toolCallId_822085521)) {
    result_822085524 = undefined;
    break BeforeRet;
    }

++excHandler;
    try {
    var original_822085820 = (await require('fs').promises.readFile(path_822085522, 'utf8'));
    HEX5BHEX5DHEX3D_822085861(state_822085520.toolPreImages, toolCallId_822085521, {path: path_822085522, content: original_822085820});
--excHandler;
} catch (EXCEPTION) {
 var prevJSError = lastJSError;
 lastJSError = EXCEPTION;
 --excHandler;
    lastJSError = prevJSError;
    } finally {
    }
    result_822085524 = undefined;
    break BeforeRet;
  } while (false);

  return result_822085524;

}

function extractDiffsFromUpdate_822085416(updateObj_822085417) {
      var Temporary2;
                var Temporary8;
                var Temporary9;
                var Temporary10;

  var result_822085418 = [];

  BeforeRet: do {
    result_822085418 = nimCopy(null, [], NTI822084603);
    if (!(updateObj_822085417.hasOwnProperty("content"))) {
    break BeforeRet;
    }

    var fallbackPath_822085423 = "";
    if (updateObj_822085417.hasOwnProperty("locations")) {
++excHandler;
    try {
    var locs_822085428 = (updateObj_822085417["locations"]);
      if (!(0 < (locs_822085428).length)) Temporary2 = false; else {        Temporary2 = locs_822085428[chckIndx(0, 0, (locs_822085428).length - 1)].hasOwnProperty("path");      }    if (Temporary2) {
    fallbackPath_822085423 = (locs_822085428[chckIndx(0, 0, (locs_822085428).length - 1)]["path"]);
    }

--excHandler;
} catch (EXCEPTION) {
 var prevJSError = lastJSError;
 lastJSError = EXCEPTION;
 --excHandler;
    lastJSError = prevJSError;
    } finally {
    }
    }

++excHandler;
    try {
    var items_822085443 = (updateObj_822085417["content"]);
    Label4: do {
      var item_822085447 = null;
      var i_822088924 = 0;
      var L_822088925 = (items_822085443).length;
      Label5: do {
          Label6: while (true) {
          if (!(i_822088924 < L_822088925)) break Label6;
            item_822085447 = items_822085443[chckIndx(i_822088924, 0, (items_822085443).length - 1)];
            Label7: do {
                if (!item_822085447.hasOwnProperty("type")) Temporary8 = false; else {                  Temporary8 = ((item_822085447["type"]) == "diff");                }              if (!(Temporary8)) {
              break Label7;
              }

              var diff_822085452 = {path: "", oldText: "", newText: ""};
              if (item_822085447.hasOwnProperty("path")) {
              diff_822085452.path = (item_822085447["path"]);
              }
              else {
              if ((0 < ((fallbackPath_822085423) == null ? 0 : (fallbackPath_822085423).length))) {
              diff_822085452.path = fallbackPath_822085423;
              }
              }
              if (item_822085447.hasOwnProperty("oldText")) {
              diff_822085452.oldText = (item_822085447["oldText"]);
              }
              else {
              if (item_822085447.hasOwnProperty("original")) {
              diff_822085452.oldText = (item_822085447["original"]);
              }
              }
              if (item_822085447.hasOwnProperty("newText")) {
              diff_822085452.newText = (item_822085447["newText"]);
              }

                if ((0 < ((diff_822085452.path) == null ? 0 : (diff_822085452.path).length))) Temporary10 = true; else {                  Temporary10 = (0 < ((diff_822085452.oldText) == null ? 0 : (diff_822085452.oldText).length));                }                if (Temporary10) Temporary9 = true; else {                  Temporary9 = (0 < ((diff_822085452.newText) == null ? 0 : (diff_822085452.newText).length));                }              if (Temporary9) {
              var Temporary11 = nimCopy(null, diff_822085452, NTI822083626);
              result_822085418.push(Temporary11);;
              }

            } while (false);
            i_822088924 = addInt(i_822088924, 1);
            if (!(((items_822085443).length == L_822088925))) {
            failedAssertImpl_218103864(makeNimstrLit("iterators.nim:240:11 `len(a) == L` the length of the seq changed while iterating over it"));
            }

          }
      } while (false);
    } while (false);
--excHandler;
} catch (EXCEPTION) {
 var prevJSError = lastJSError;
 lastJSError = EXCEPTION;
 --excHandler;
    lastJSError = prevJSError;
    } finally {
    }
  } while (false);

  return result_822085418;

}

function extractNewTextFrom_822085277(updateObj_822085278) {
  var result_822085279 = null;

  BeforeRet: do {
    if (!(updateObj_822085278.hasOwnProperty("content"))) {
    result_822085279 = "";
    break BeforeRet;
    }

    var contentObj_822085280 = updateObj_822085278["content"];
++excHandler;
    try {
    var items_822085285 = (contentObj_822085280);
    Label2: do {
      var item_822085307 = null;
      var i_822088928 = 0;
      var L_822088929 = (items_822085285).length;
      Label3: do {
          Label4: while (true) {
          if (!(i_822088928 < L_822088929)) break Label4;
            item_822085307 = items_822085285[chckIndx(i_822088928, 0, (items_822085285).length - 1)];
            if (item_822085307.hasOwnProperty("newText")) {
            result_822085279 = (item_822085307["newText"]);
            break BeforeRet;
            }

            i_822088928 = addInt(i_822088928, 1);
            if (!(((items_822085285).length == L_822088929))) {
            failedAssertImpl_218103864(makeNimstrLit("iterators.nim:240:11 `len(a) == L` the length of the seq changed while iterating over it"));
            }

          }
      } while (false);
    } while (false);
--excHandler;
} catch (EXCEPTION) {
 var prevJSError = lastJSError;
 lastJSError = EXCEPTION;
 --excHandler;
    lastJSError = prevJSError;
    } finally {
    }
    if (contentObj_822085280.hasOwnProperty("newText")) {
    result_822085279 = (contentObj_822085280["newText"]);
    break BeforeRet;
    }

    result_822085279 = "";
  } while (false);

  return result_822085279;

}

function HEX5BHEX5D_822088241(t_822088244, key_822088245) {
  var result_822088246 = null;

    var hcHEX60gensym22_822088247 = [0];
    var indexHEX60gensym22_822088254 = rawGet_822085577(t_822088244, key_822088245, hcHEX60gensym22_822088247, 0);
    if ((0 <= indexHEX60gensym22_822088254)) {
    result_822088246 = t_822088244.data[chckIndx(indexHEX60gensym22_822088254, 0, (t_822088244.data).length - 1)].Field2;
    }
    else {
    raiseKeyError_822084169(key_822088245);
    }


  return result_822088246;

}

function mustRehash_822084407(t_822084409) {
  var result_822084410 = false;

    if (!((t_822084409.counter < (t_822084409.data).length))) {
    failedAssertImpl_218103864(makeNimstrLit("hashcommon.nim:29:9 `\x0At.counter < t.dataLen` "));
    }

    result_822084410 = ((mulInt((t_822084409.data).length, 2) < mulInt(t_822084409.counter, 3)) || (subInt((t_822084409.data).length, t_822084409.counter) < 4));

  return result_822084410;

}

function rawInsert_822084856(t_822084860, data_822084861, data_822084861_Idx, key_822084862, val_822084863, hc_822084864, h_822084865) {
    data_822084861[data_822084861_Idx][chckIndx(h_822084865, 0, (data_822084861[data_822084861_Idx]).length - 1)].Field1 = key_822084862;
    data_822084861[data_822084861_Idx][chckIndx(h_822084865, 0, (data_822084861[data_822084861_Idx]).length - 1)].Field2 = nimCopy(data_822084861[data_822084861_Idx][chckIndx(h_822084865, 0, (data_822084861[data_822084861_Idx]).length - 1)].Field2, val_822084863, NTI822083627);
    data_822084861[data_822084861_Idx][chckIndx(h_822084865, 0, (data_822084861[data_822084861_Idx]).length - 1)].Field0 = hc_822084864;


}

function enlarge_822084562(t_822084565) {
    var n_822084568 = [];
    n_822084568 = new Array(chckRange(mulInt((t_822084565.data).length, 2), 0, 2147483647)); for (var i = 0 ; i < chckRange(mulInt((t_822084565.data).length, 2), 0, 2147483647) ; ++i) { n_822084568[i] = {Field0: 0, Field1: null, Field2: ({currentMessageId: null, aggregatedContent: null, collectedUpdates: [], activePrompt: false, toolPreImages: ({data: [], counter: 0})})}; }    var Temporary1 = t_822084565.data; t_822084565.data = n_822084568; n_822084568 = Temporary1;    Label2: do {
      var i_822084632 = 0;
      var colontmp__822088933 = 0;
      colontmp__822088933 = (n_822084568).length - 1;
      var res_822088934 = 0;
      Label3: do {
          Label4: while (true) {
          if (!(res_822088934 <= colontmp__822088933)) break Label4;
            i_822084632 = res_822088934;
            var eh_822084686 = n_822084568[chckIndx(i_822084632, 0, (n_822084568).length - 1)].Field0;
            if (isFilled_1023410206(eh_822084686)) {
            var j_822084690 = (eh_822084686 & (t_822084565.data).length - 1);
            Label5: do {
                Label6: while (true) {
                if (!isFilled_1023410206(t_822084565.data[chckIndx(j_822084690, 0, (t_822084565.data).length - 1)].Field0)) break Label6;
                  j_822084690 = nextTry_1023410209(j_822084690, (t_822084565.data).length - 1);
                }
            } while (false);
            rawInsert_822084856(t_822084565, t_822084565, "data", n_822084568[chckIndx(i_822084632, 0, (n_822084568).length - 1)].Field1, n_822084568[chckIndx(i_822084632, 0, (n_822084568).length - 1)].Field2, eh_822084686, j_822084690);
            }

            res_822088934 = addInt(res_822088934, 1);
          }
      } while (false);
    } while (false);


}

function rawGetKnownHC_822085025(t_822085028, key_822085029, hc_822085030) {
  var result_822085031 = 0;

  BeforeRet: do {
    if (((t_822085028.data).length == 0)) {
    result_822085031 = -1;
    break BeforeRet;
    }

    var h_822085082 = (hc_822085030 & (t_822085028.data).length - 1);
    Label1: do {
        Label2: while (true) {
        if (!isFilled_1023410206(t_822085028.data[chckIndx(h_822085082, 0, (t_822085028.data).length - 1)].Field0)) break Label2;
          if (((t_822085028.data[chckIndx(h_822085082, 0, (t_822085028.data).length - 1)].Field0 == hc_822085030) && (t_822085028.data[chckIndx(h_822085082, 0, (t_822085028.data).length - 1)].Field1 == key_822085029))) {
          result_822085031 = h_822085082;
          break BeforeRet;
          }

          h_822085082 = nextTry_1023410209(h_822085082, (t_822085028.data).length - 1);
        }
    } while (false);
    result_822085031 = subInt(-1, h_822085082);
  } while (false);

  return result_822085031;

}

function HEX5BHEX5DHEX3D_822084234(t_822084237, key_822084238, val_822084239) {
    if (((t_822084237.data).length == 0)) {
    var correctSizeHEX60gensym8_822084288 = slotsNeeded_1023410217(32);
    t_822084237.counter = 0;
    t_822084237.data = new Array(chckRange(correctSizeHEX60gensym8_822084288, 0, 2147483647)); for (var i = 0 ; i < chckRange(correctSizeHEX60gensym8_822084288, 0, 2147483647) ; ++i) { t_822084237.data[i] = {Field0: 0, Field1: null, Field2: ({currentMessageId: null, aggregatedContent: null, collectedUpdates: [], activePrompt: false, toolPreImages: ({data: [], counter: 0})})}; }    }

    var hc_822084293 = [0];
    var index_822084300 = rawGet_822083819(t_822084237, key_822084238, hc_822084293, 0);
    if ((0 <= index_822084300)) {
    t_822084237.data[chckIndx(index_822084300, 0, (t_822084237.data).length - 1)].Field2 = nimCopy(t_822084237.data[chckIndx(index_822084300, 0, (t_822084237.data).length - 1)].Field2, val_822084239, NTI822083627);
    }
    else {
      if (((t_822084237.data).length == 0)) {
      var correctSizeHEX60gensym11_822084402 = slotsNeeded_1023410217(32);
      t_822084237.counter = 0;
      t_822084237.data = new Array(chckRange(correctSizeHEX60gensym11_822084402, 0, 2147483647)); for (var i = 0 ; i < chckRange(correctSizeHEX60gensym11_822084402, 0, 2147483647) ; ++i) { t_822084237.data[i] = {Field0: 0, Field1: null, Field2: ({currentMessageId: null, aggregatedContent: null, collectedUpdates: [], activePrompt: false, toolPreImages: ({data: [], counter: 0})})}; }      }

      if (mustRehash_822084407(t_822084237)) {
      enlarge_822084562(t_822084237);
      index_822084300 = rawGetKnownHC_822085025(t_822084237, key_822084238, hc_822084293[0]);
      }

      index_822084300 = subInt(-1, index_822084300);
      rawInsert_822084856(t_822084237, t_822084237, "data", key_822084238, val_822084239, hc_822084293[0], index_822084300);
      t_822084237.counter = addInt(t_822084237.counter, 1);
    }



}

function saveSessionState_822084191(sessionId_822084192, state_822084193) {
    HEX5BHEX5DHEX3D_822084234(sessionsById_822083705[0], sessionId_822084192, state_822084193);


}
async function HEX3Aanonymous_822087428(params_822087429) {
    var Temporary1;
    var Temporary2;

function innerHEX60gensym68_822087515() {
      var result_822087516 = null;

      BeforeRet: do {
        var a_822087517 = null;
        a_822087517 = {};
        a_822087517["id"] = terminalId_822087502;
        a_822087517["sessionId"] = acpSessionId_822087449;
        a_822087517["clientSessionId"] = clientSessionId_822087450;
        a_822087517["params"] = params_822087429;
        result_822087516 = a_822087517;
        break BeforeRet;
      } while (false);

      return result_822087516;

    }

function innerHEX60gensym80_822087569() {
      var result_822087570 = null;

      BeforeRet: do {
        var a_822087571 = null;
        a_822087571 = {};
        a_822087571["id"] = terminalId_822087502;
        result_822087570 = a_822087571;
        break BeforeRet;
      } while (false);

      return result_822087570;

    }

  var result_822087431 = null;

  BeforeRet: do {
    terminalCounter_822083673[0] = addInt(terminalCounter_822083673[0], 1);
    if (params_822087429.hasOwnProperty("sessionId")) {
    Temporary1 = (params_822087429["sessionId"]);
    }
    else {
    Temporary1 = "";
    }

    var acpSessionId_822087449 = Temporary1;
    var clientSessionId_822087450 = clientSessionForAcp_822087319(acpSessionId_822087449);
    if (params_822087429.hasOwnProperty("id")) {
    Temporary2 = (params_822087429["id"]);
    }
    else {
      Label3: do {
        var fmtRes_822087459 = [mnewString(0)];
        fmtRes_822087459[0].push.apply(fmtRes_822087459[0], makeNimstrLit("acp-term-"));;
        formatValue_822087460(fmtRes_822087459, 0, terminalCounter_822083673[0], []);
      } while (false);
    Temporary2 = toJSStr(fmtRes_822087459[0]);
    }

    var terminalId_822087502 = Temporary2;
    mainWindow_1442840599[0].webContents.send(("CODETRACER::acp-create-terminal"), (innerHEX60gensym68_822087515()));
    result_822087431 = innerHEX60gensym80_822087569();
    break BeforeRet;
  } while (false);

  return result_822087431;

}
async function HEX3Aanonymous_822087600(params_822087601) {
    var Temporary1;

function innerHEX60gensym89_822087620() {
      var result_822087621 = null;

      BeforeRet: do {
        var a_822087622 = null;
        a_822087622 = {};
        a_822087622["error"] = makeNimstrLit("missing path");
        result_822087621 = a_822087622;
        break BeforeRet;
      } while (false);

      return result_822087621;

    }

function innerHEX60gensym95_822087642() {
      var result_822087643 = null;

      BeforeRet: do {
        var a_822087644 = null;
        a_822087644 = {};
        a_822087644["content"] = content_822087639;
        result_822087643 = a_822087644;
        break BeforeRet;
      } while (false);

      return result_822087643;

    }

function innerHEX60gensym101_822087659() {
      var result_822087660 = null;

      BeforeRet: do {
        var a_822087661 = null;
        a_822087661 = {};
        Label1: do {
          var fmtRes_822087670 = [mnewString(0)];
          fmtRes_822087670[0].push.apply(fmtRes_822087670[0], makeNimstrLit("[acp_ipc] readTextFile failed: "));;
          formatValue_1174405282(fmtRes_822087670, 0, getCurrentExceptionMsg_33556532(), []);
        } while (false);
        a_822087661["error"] = toJSStr(fmtRes_822087670[0]);
        result_822087660 = a_822087661;
        break BeforeRet;
      } while (false);

      return result_822087660;

    }

  var result_822087603 = null;

  BeforeRet: do {
    if (params_822087601.hasOwnProperty("path")) {
    Temporary1 = (params_822087601["path"]);
    }
    else {
    Temporary1 = "";
    }

    var path_822087617 = Temporary1;
    if ((((path_822087617) == null ? 0 : (path_822087617).length) == 0)) {
    result_822087603 = innerHEX60gensym89_822087620();
    break BeforeRet;
    }

++excHandler;
    try {
    var content_822087639 = (await require('fs').promises.readFile(path_822087617, 'utf8'));
    result_822087603 = innerHEX60gensym95_822087642();
    break BeforeRet;
--excHandler;
} catch (EXCEPTION) {
 var prevJSError = lastJSError;
 lastJSError = EXCEPTION;
 --excHandler;
    result_822087603 = innerHEX60gensym101_822087659();
    break BeforeRet;
    lastJSError = prevJSError;
    } finally {
    }
  } while (false);

  return result_822087603;

}
async function HEX3Aanonymous_822087686(params_822087687) {
    var Temporary1;
    var Temporary2;

function innerHEX60gensym111_822087711() {
      var result_822087712 = null;

      BeforeRet: do {
        var a_822087713 = null;
        a_822087713 = {};
        a_822087713["error"] = makeNimstrLit("missing path");
        result_822087712 = a_822087713;
        break BeforeRet;
      } while (false);

      return result_822087712;

    }

function innerHEX60gensym122_822087742() {
      var result_822087743 = null;

      BeforeRet: do {
        var a_822087744 = null;
        a_822087744 = {};
        a_822087744["path"] = path_822087703;
        result_822087743 = a_822087744;
        break BeforeRet;
      } while (false);

      return result_822087743;

    }

function innerHEX60gensym131_822087768() {
      var result_822087769 = null;

      BeforeRet: do {
        var a_822087770 = null;
        a_822087770 = {};
        a_822087770["ok"] = true;
        result_822087769 = a_822087770;
        break BeforeRet;
      } while (false);

      return result_822087769;

    }

function innerHEX60gensym137_822087785() {
      var result_822087786 = null;

      BeforeRet: do {
        var a_822087787 = null;
        a_822087787 = {};
        Label1: do {
          var fmtRes_822087796 = [mnewString(0)];
          fmtRes_822087796[0].push.apply(fmtRes_822087796[0], makeNimstrLit("[acp_ipc] writeTextFile failed: "));;
          formatValue_1174405282(fmtRes_822087796, 0, getCurrentExceptionMsg_33556532(), []);
        } while (false);
        a_822087787["error"] = toJSStr(fmtRes_822087796[0]);
        result_822087786 = a_822087787;
        break BeforeRet;
      } while (false);

      return result_822087786;

    }

  var result_822087689 = null;

  BeforeRet: do {
    if (params_822087687.hasOwnProperty("path")) {
    Temporary1 = (params_822087687["path"]);
    }
    else {
    Temporary1 = "";
    }

    var path_822087703 = Temporary1;
    if (params_822087687.hasOwnProperty("content")) {
    Temporary2 = (params_822087687["content"]);
    }
    else {
    Temporary2 = "";
    }

    var content_822087708 = Temporary2;
    if ((((path_822087703) == null ? 0 : (path_822087703).length) == 0)) {
    result_822087689 = innerHEX60gensym111_822087711();
    break BeforeRet;
    }

++excHandler;
    try {
    (await require('fs').promises.writeFile(path_822087703, content_822087708, 'utf8'));
    mainWindow_1442840599[0].webContents.send(("CODETRACER::reload-file"), (innerHEX60gensym122_822087742()));
    result_822087689 = innerHEX60gensym131_822087768();
    break BeforeRet;
--excHandler;
} catch (EXCEPTION) {
 var prevJSError = lastJSError;
 lastJSError = EXCEPTION;
 --excHandler;
    result_822087689 = innerHEX60gensym137_822087785();
    break BeforeRet;
    lastJSError = prevJSError;
    } finally {
    }
  } while (false);

  return result_822087689;

}
async function HEX3Aanonymous_822087812(params_822087813) {
    var Temporary1;
              var Temporary6;
              var Temporary7;
      var Temporary8;
      var Temporary9;

function innerHEX60gensym150_822087859() {

function innerHEX60gensym158_822087868() {
          var result_822087869 = null;

          BeforeRet: do {
            var a_822087870 = null;
            a_822087870 = {};
            a_822087870["outcome"] = "selected";
            a_822087870["optionId"] = optionId_822087826;
            result_822087869 = a_822087870;
            break BeforeRet;
          } while (false);

          return result_822087869;

        }

      var result_822087860 = null;

      BeforeRet: do {
        var a_822087861 = null;
        a_822087861 = {};
        a_822087861["outcome"] = innerHEX60gensym158_822087868();
        a_822087861["options"] = options_822087825;
        result_822087860 = a_822087861;
        break BeforeRet;
      } while (false);

      return result_822087860;

    }

  var result_822087815 = null;

  BeforeRet: do {
    if (params_822087813.hasOwnProperty("options")) {
    Temporary1 = params_822087813["options"];
    }
    else {
    Temporary1 = undefined;
    }

    var options_822087825 = Temporary1;
    var optionId_822087826 = "";
    if (!((options_822087825 === undefined))) {
++excHandler;
    try {
    var opts_822087834 = (options_822087825);
    Label3: do {
      var opt_822087838 = null;
      var i_822088868 = 0;
      var L_822088869 = (opts_822087834).length;
      Label4: do {
          Label5: while (true) {
          if (!(i_822088868 < L_822088869)) break Label5;
            opt_822087838 = opts_822087834[chckIndx(i_822088868, 0, (opts_822087834).length - 1)];
              if (!opt_822087838.hasOwnProperty("kind")) Temporary7 = false; else {                Temporary7 = ((opt_822087838["kind"]) == "allow_always");              }              if (!Temporary7) Temporary6 = false; else {                Temporary6 = opt_822087838.hasOwnProperty("optionId");              }            if (Temporary6) {
            optionId_822087826 = (opt_822087838["optionId"]);
            break Label3;
            }

            i_822088868 = addInt(i_822088868, 1);
            if (!(((opts_822087834).length == L_822088869))) {
            failedAssertImpl_218103864(makeNimstrLit("iterators.nim:240:11 `len(a) == L` the length of the seq changed while iterating over it"));
            }

          }
      } while (false);
    } while (false);
      if (!(((optionId_822087826) == null ? 0 : (optionId_822087826).length) == 0)) Temporary9 = false; else {        Temporary9 = (0 < (opts_822087834).length);      }      if (!Temporary9) Temporary8 = false; else {        Temporary8 = opts_822087834[chckIndx(0, 0, (opts_822087834).length - 1)].hasOwnProperty("optionId");      }    if (Temporary8) {
    optionId_822087826 = (opts_822087834[chckIndx(0, 0, (opts_822087834).length - 1)]["optionId"]);
    }

--excHandler;
} catch (EXCEPTION) {
 var prevJSError = lastJSError;
 lastJSError = EXCEPTION;
 --excHandler;
    lastJSError = prevJSError;
    } finally {
    }
    }

    result_822087815 = innerHEX60gensym150_822087859();
    break BeforeRet;
  } while (false);

  return result_822087815;

}
async function HEX3Aanonymous_822087911(params_822087912) {
    var Temporary1;
      var Temporary2;
    var Temporary3;
    var Temporary4;

function innerHEX60gensym200_822088071() {
                var result_822088072 = null;

                BeforeRet: do {
                  var a_822088073 = null;
                  a_822088073 = {};
                  a_822088073["sessionId"] = acpSessionId_822087924;
                  a_822088073["clientSessionId"] = clientSessionId_822087925;
                  a_822088073["id"] = diffId_822088058;
                  a_822088073["path"] = d_822088047.path;
                  a_822088073["original"] = d_822088047.oldText;
                  a_822088073["modified"] = d_822088047.newText;
                  result_822088072 = a_822088073;
                  break BeforeRet;
                } while (false);

                return result_822088072;

              }

function innerHEX60gensym234_822088360() {
        var result_822088361 = null;

        BeforeRet: do {
          var a_822088362 = null;
          a_822088362 = {};
          a_822088362["sessionId"] = acpSessionId_822087924;
          a_822088362["clientSessionId"] = clientSessionId_822087925;
          a_822088362["id"] = diffId_822088321;
          a_822088362["path"] = resolvedPath_822088142;
          a_822088362["original"] = original_822088141;
          a_822088362["modified"] = newText_822088140;
          result_822088361 = a_822088362;
          break BeforeRet;
        } while (false);

        return result_822088361;

      }
              var Temporary20;
              var Temporary21;
      var Temporary22;
      var Temporary23;
    var Temporary24;

function innerHEX60gensym254_822088464() {

function innerHEX60gensym264_822088491() {
          var result_822088492 = null;

          BeforeRet: do {
            var a_822088493 = null;
            a_822088493 = {};
            a_822088493["outcome"] = "selected";
            a_822088493["optionId"] = optionId_822088434;
            result_822088492 = a_822088493;
            break BeforeRet;
          } while (false);

          return result_822088492;

        }

      var result_822088465 = null;

      BeforeRet: do {
        var a_822088466 = null;
        a_822088466 = {};
        a_822088466["sessionId"] = acpSessionId_822087924;
        a_822088466["toolCallId"] = toolCallId_822088461;
        a_822088466["outcome"] = innerHEX60gensym264_822088491();
        result_822088465 = a_822088466;
        break BeforeRet;
      } while (false);

      return result_822088465;

    }
      var Temporary26;
      var Temporary27;
      var Temporary28;

function innerHEX60gensym286_822088545() {
      var result_822088546 = null;

      BeforeRet: do {
        var a_822088547 = null;
        a_822088547 = {};
        a_822088547["sessionId"] = acpSessionId_822087924;
        a_822088547["clientSessionId"] = clientSessionId_822087925;
        a_822088547["id"] = state_822087926[0].currentMessageId;
        a_822088547["content"] = chunk_822088532;
        result_822088546 = a_822088547;
        break BeforeRet;
      } while (false);

      return result_822088546;

    }
    var Temporary29;
      var Temporary30;

function innerHEX60gensym315_822088629() {
      var result_822088630 = null;

      BeforeRet: do {
        var a_822088631 = null;
        a_822088631 = {};
        a_822088631["sessionId"] = acpSessionId_822087924;
        a_822088631["clientSessionId"] = clientSessionId_822087925;
        a_822088631["id"] = toolCallId_822088600;
        a_822088631["path"] = path_822088603;
        a_822088631["original"] = original_822088601;
        a_822088631["modified"] = modified_822088602;
        result_822088630 = a_822088631;
        break BeforeRet;
      } while (false);

      return result_822088630;

    }
              var Temporary36;
              var Temporary37;

function innerHEX60gensym335_822088743() {
      var result_822088744 = null;

      BeforeRet: do {
        var a_822088745 = null;
        a_822088745 = {};
        a_822088745["path"] = path_822088698;
        result_822088744 = a_822088745;
        break BeforeRet;
      } while (false);

      return result_822088744;

    }

function innerHEX60gensym349_822088779() {
      var result_822088780 = null;

      BeforeRet: do {
        var a_822088781 = null;
        a_822088781 = {};
        a_822088781["path"] = path_822088698;
        result_822088780 = a_822088781;
        break BeforeRet;
      } while (false);

      return result_822088780;

    }

  var result_822087914 = null;

  BeforeRet: do {
    if (params_822087912.hasOwnProperty("sessionId")) {
    Temporary1 = (params_822087912["sessionId"]);
    }
    else {
    Temporary1 = "";
    }

    var acpSessionId_822087924 = Temporary1;
    var clientSessionId_822087925 = clientSessionForAcp_822087319(acpSessionId_822087924);
    if ((((clientSessionId_822087925) == null ? 0 : (clientSessionId_822087925).length) == 0)) {
    result_822087914 = undefined;
    break BeforeRet;
    }

    var state_822087926 = [({currentMessageId: null, aggregatedContent: null, collectedUpdates: [], activePrompt: false, toolPreImages: ({data: [], counter: 0})})];
      if ((((acpSessionId_822087924) == null ? 0 : (acpSessionId_822087924).length) == 0)) Temporary2 = true; else {        Temporary2 = !(getSessionState_822083768(acpSessionId_822087924, state_822087926[0]));      }    if (Temporary2) {
    result_822087914 = undefined;
    break BeforeRet;
    }

    if (!(state_822087926[0].activePrompt)) {
    result_822087914 = undefined;
    break BeforeRet;
    }

    var updateKind_822087927 = "";
    if (params_822087912.hasOwnProperty("update")) {
    var u_822087928 = params_822087912["update"];
    if (u_822087928.hasOwnProperty("sessionUpdate")) {
    updateKind_822087927 = (u_822087928["sessionUpdate"]);
    }

    }

    if ((params_822087912.hasOwnProperty("update") && params_822087912["update"].hasOwnProperty("content"))) {
    Temporary3 = (((Temporary4 = JSON.stringify(params_822087912["update"]["content"]), Temporary4)) == null ? 0 : (Temporary4).length);
    }
    else {
    Temporary3 = 0;
    }

    var contentLen_822087933 = Temporary3;
    var contentPreview_822087934 = "";
    if ((params_822087912.hasOwnProperty("update") && params_822087912["update"].hasOwnProperty("content"))) {
    var contentStr_822087935 = cstrToNimstr(JSON.stringify(params_822087912["update"]["content"]));
    if ((200 < (contentStr_822087935).length)) {
    contentPreview_822087934 = toJSStr(HEX5BHEX5D_738198380(contentStr_822087935, HEX2EHEX2E_738198355(0, 199)));
    }
    else {
      contentPreview_822087934 = toJSStr(contentStr_822087935);
    }

    }

    Label5: do {
      var fmtRes_822087958 = [mnewString(0)];
      fmtRes_822087958[0].push.apply(fmtRes_822087958[0], makeNimstrLit("[acp_ipc] update sessionId="));;
      add_33556419(fmtRes_822087958, 0, acpSessionId_822087924);
      fmtRes_822087958[0].push.apply(fmtRes_822087958[0], makeNimstrLit(" clientSessionId="));;
      add_33556419(fmtRes_822087958, 0, clientSessionId_822087925);
      fmtRes_822087958[0].push.apply(fmtRes_822087958[0], makeNimstrLit(" kind="));;
      add_33556419(fmtRes_822087958, 0, updateKind_822087927);
      fmtRes_822087958[0].push.apply(fmtRes_822087958[0], makeNimstrLit(" contentLen="));;
      formatValue_822087460(fmtRes_822087958, 0, contentLen_822087933, []);
      fmtRes_822087958[0].push.apply(fmtRes_822087958[0], makeNimstrLit(" contentPreview="));;
      add_33556419(fmtRes_822087958, 0, contentPreview_822087934);
    } while (false);
    rawEcho(fmtRes_822087958[0]);
    state_822087926[0].collectedUpdates.push(params_822087912);;
++excHandler;
    try {
    if (params_822087912.hasOwnProperty("update")) {
    var updateObj_822087968 = params_822087912["update"];
    if (updateObj_822087968.hasOwnProperty("sessionUpdate")) {
    var updateKind_822087973 = (updateObj_822087968["sessionUpdate"]);
    if (((updateKind_822087973 == "tool_call") || (updateKind_822087973 == "tool_call_update"))) {
    var toolCallId_822087974 = toolCallIdFrom_822085262(updateObj_822087968);
    var path_822087975 = extractPathFromUpdate_822085355(updateObj_822087968);
    (await capturePreImage_822085519(state_822087926[0], toolCallId_822087974, path_822087975));
    var structuredDiffs_822087980 = extractDiffsFromUpdate_822085416(updateObj_822087968);
    if ((0 < (structuredDiffs_822087980).length)) {
    var diffIdPrefix_822087988 = toolCallId_822087974;
    if ((((diffIdPrefix_822087988) == null ? 0 : (diffIdPrefix_822087988).length) == 0)) {
    if ((0 < ((state_822087926[0].currentMessageId) == null ? 0 : (state_822087926[0].currentMessageId).length))) {
    Label7: do {
      var fmtRes_822087993 = [mnewString(0)];
      fmtRes_822087993[0].push.apply(fmtRes_822087993[0], makeNimstrLit("diff-"));;
      add_33556419(fmtRes_822087993, 0, state_822087926[0].currentMessageId);
      fmtRes_822087993[0].push.apply(fmtRes_822087993[0], makeNimstrLit("-"));;
      formatValue_822087460(fmtRes_822087993, 0, (state_822087926[0].collectedUpdates).length, []);
    } while (false);
    diffIdPrefix_822087988 = toJSStr(fmtRes_822087993[0]);
    }
    else {
      Label8: do {
        var fmtRes_822088006 = [mnewString(0)];
        fmtRes_822088006[0].push.apply(fmtRes_822088006[0], makeNimstrLit("diff-"));;
        formatValue_822087460(fmtRes_822088006, 0, (state_822087926[0].collectedUpdates).length, []);
      } while (false);
      diffIdPrefix_822087988 = toJSStr(fmtRes_822088006[0]);
    }

    }

    Label9: do {
      var i_822088046 = 0;
      var d_822088047 = ({path: null, oldText: null, newText: null});
      var i_822088878 = 0;
      var L_822088879 = (structuredDiffs_822087980).length;
      Label10: do {
          Label11: while (true) {
          if (!(i_822088878 < L_822088879)) break Label11;
            i_822088046 = i_822088878;
            d_822088047 = nimCopy(d_822088047, structuredDiffs_822087980[chckIndx(i_822088878, 0, (structuredDiffs_822087980).length - 1)], NTI822083626);
            Label12: do {
              if (((((d_822088047.oldText) == null ? 0 : (d_822088047.oldText).length) == 0) && (((d_822088047.newText) == null ? 0 : (d_822088047.newText).length) == 0))) {
              break Label12;
              }

              Label13: do {
                var fmtRes_822088052 = [mnewString(0)];
                add_33556419(fmtRes_822088052, 0, diffIdPrefix_822087988);
                fmtRes_822088052[0].push.apply(fmtRes_822088052[0], makeNimstrLit(":"));;
                formatValue_822087460(fmtRes_822088052, 0, i_822088046, []);
              } while (false);
              var diffId_822088058 = toJSStr(fmtRes_822088052[0]);
            } while (false);
            mainWindow_1442840599[0].webContents.send(("CODETRACER::acp-render-diff"), (innerHEX60gensym200_822088071()));
            i_822088878 = addInt(i_822088878, 1);
            if (!(((structuredDiffs_822087980).length == L_822088879))) {
            failedAssertImpl_218103864(makeNimstrLit("iterators.nim:173:11 `len(a) == L` the length of the seq changed while iterating over it"));
            }

          }
      } while (false);
    } while (false);
    }
    else {
      var newText_822088140 = extractNewTextFrom_822085277(updateObj_822087968);
      if ((0 < ((newText_822088140) == null ? 0 : (newText_822088140).length))) {
      var original_822088141 = "";
      var resolvedPath_822088142 = path_822087975;
      if (hasKey_822085570(state_822087926[0].toolPreImages, toolCallId_822087974)) {
      var pre_822088320 = nimCopy(null, HEX5BHEX5D_822088241(state_822087926[0].toolPreImages, toolCallId_822087974), NTI822083625);
      original_822088141 = pre_822088320.content;
      if ((((resolvedPath_822088142) == null ? 0 : (resolvedPath_822088142).length) == 0)) {
      resolvedPath_822088142 = pre_822088320.path;
      }

      }

      var diffId_822088321 = toolCallId_822087974;
      if ((((diffId_822088321) == null ? 0 : (diffId_822088321).length) == 0)) {
      if ((0 < ((state_822087926[0].currentMessageId) == null ? 0 : (state_822087926[0].currentMessageId).length))) {
      Label14: do {
        var fmtRes_822088326 = [mnewString(0)];
        fmtRes_822088326[0].push.apply(fmtRes_822088326[0], makeNimstrLit("diff-"));;
        add_33556419(fmtRes_822088326, 0, state_822087926[0].currentMessageId);
        fmtRes_822088326[0].push.apply(fmtRes_822088326[0], makeNimstrLit("-"));;
        formatValue_822087460(fmtRes_822088326, 0, (state_822087926[0].collectedUpdates).length, []);
      } while (false);
      diffId_822088321 = toJSStr(fmtRes_822088326[0]);
      }
      else {
        Label15: do {
          var fmtRes_822088339 = [mnewString(0)];
          fmtRes_822088339[0].push.apply(fmtRes_822088339[0], makeNimstrLit("diff-"));;
          formatValue_822087460(fmtRes_822088339, 0, (state_822087926[0].collectedUpdates).length, []);
        } while (false);
        diffId_822088321 = toJSStr(fmtRes_822088339[0]);
      }

      }

      mainWindow_1442840599[0].webContents.send(("CODETRACER::acp-render-diff"), (innerHEX60gensym234_822088360()));
      }

    }

    }

    if (((updateKind_822087973 == "tool_call") && updateObj_822087968.hasOwnProperty("options"))) {
++excHandler;
    try {
    var opts_822088433 = (updateObj_822087968["options"]);
    var optionId_822088434 = "";
    Label17: do {
      var opt_822088438 = null;
      var i_822088884 = 0;
      var L_822088885 = (opts_822088433).length;
      Label18: do {
          Label19: while (true) {
          if (!(i_822088884 < L_822088885)) break Label19;
            opt_822088438 = opts_822088433[chckIndx(i_822088884, 0, (opts_822088433).length - 1)];
              if (!opt_822088438.hasOwnProperty("kind")) Temporary21 = false; else {                Temporary21 = ((opt_822088438["kind"]) == "allow_always");              }              if (!Temporary21) Temporary20 = false; else {                Temporary20 = opt_822088438.hasOwnProperty("optionId");              }            if (Temporary20) {
            optionId_822088434 = (opt_822088438["optionId"]);
            break Label17;
            }

            i_822088884 = addInt(i_822088884, 1);
            if (!(((opts_822088433).length == L_822088885))) {
            failedAssertImpl_218103864(makeNimstrLit("iterators.nim:240:11 `len(a) == L` the length of the seq changed while iterating over it"));
            }

          }
      } while (false);
    } while (false);
      if (!(((optionId_822088434) == null ? 0 : (optionId_822088434).length) == 0)) Temporary23 = false; else {        Temporary23 = (0 < (opts_822088433).length);      }      if (!Temporary23) Temporary22 = false; else {        Temporary22 = opts_822088433[chckIndx(0, 0, (opts_822088433).length - 1)].hasOwnProperty("optionId");      }    if (Temporary22) {
    optionId_822088434 = (opts_822088433[chckIndx(0, 0, (opts_822088433).length - 1)]["optionId"]);
    }

    if ((0 < ((optionId_822088434) == null ? 0 : (optionId_822088434).length))) {
    if (updateObj_822087968.hasOwnProperty("toolCallId")) {
    Temporary24 = (updateObj_822087968["toolCallId"]);
    }
    else {
    Temporary24 = "";
    }

    var toolCallId_822088461 = Temporary24;
    var _ = acpClient_822083676[0].extNotification("tool_permission", innerHEX60gensym254_822088464());
    }

--excHandler;
} catch (EXCEPTION) {
 var prevJSError = lastJSError;
 lastJSError = EXCEPTION;
 --excHandler;
    if ((LOG_LEVEL_1392509023 <= 3)) {
    var iHEX60gensym267_822088522 = {Field0: makeNimstrLit("acp_ipc.nim"), Field1: 337, Field2: 64};
    Label25: do {
      var fmtRes_822088527 = [mnewString(0)];
      fmtRes_822088527[0].push.apply(fmtRes_822088527[0], makeNimstrLit("[acp_ipc] auto-allow tool permission failed: "));;
      formatValue_1174405282(fmtRes_822088527, 0, getCurrentExceptionMsg_33556532(), []);
    } while (false);
    rawEcho(makeNimstrLit("ERROR [ct]("), (iHEX60gensym267_822088522.Field0 || []).concat(makeNimstrLit(":") || [],HEX24_352321539(iHEX60gensym267_822088522.Field1) || []), makeNimstrLit("):"), cstrToNimstr(toJSStr(fmtRes_822088527[0])));
    }

    lastJSError = prevJSError;
    } finally {
    }
    }

      if (!(updateKind_822087973 == "agent_message_chunk")) Temporary28 = false; else {        Temporary28 = (0 < ((state_822087926[0].currentMessageId) == null ? 0 : (state_822087926[0].currentMessageId).length));      }      if (!Temporary28) Temporary27 = false; else {        Temporary27 = updateObj_822087968.hasOwnProperty("content");      }      if (!Temporary27) Temporary26 = false; else {        Temporary26 = updateObj_822087968["content"].hasOwnProperty("text");      }    if (Temporary26) {
    var chunk_822088532 = (updateObj_822087968["content"]["text"]);
    if (null != chunk_822088532) { if (null == state_822087926[0].aggregatedContent) state_822087926[0].aggregatedContent = chunk_822088532; else state_822087926[0].aggregatedContent += chunk_822088532; };
    mainWindow_1442840599[0].webContents.send(("CODETRACER::acp-receive-response"), (innerHEX60gensym286_822088545()));
    }

    if ((updateKind_822087973 == "tool_call_update")) {
    if (updateObj_822087968.hasOwnProperty("toolCallId")) {
    Temporary29 = (updateObj_822087968["toolCallId"]);
    }
    else {
    Temporary29 = "";
    }

    var toolCallId_822088600 = Temporary29;
    var original_822088601 = "";
    var modified_822088602 = "";
    var path_822088603 = "";
    if ((updateObj_822087968.hasOwnProperty("rawOutput") && updateObj_822087968["rawOutput"].hasOwnProperty("output"))) {
    original_822088601 = (updateObj_822087968["rawOutput"]["output"]);
    }

    if (updateObj_822087968.hasOwnProperty("rawInput")) {
    var rawInput_822088608 = updateObj_822087968["rawInput"];
    if (rawInput_822088608.hasOwnProperty("formattedOutput")) {
    modified_822088602 = (rawInput_822088608["content"]);
    }

    if (rawInput_822088608.hasOwnProperty("filePath")) {
    path_822088603 = (rawInput_822088608["filePath"]);
    }

    }

    rawEcho(makeNimstrLit("ACP RESPONSE \\n"));
    console.log(updateObj_822087968);
    rawEcho(makeNimstrLit("ORIGINAL \x0A"), cstrToNimstr(original_822088601));
    rawEcho(makeNimstrLit("MODIFIED \x0A"), cstrToNimstr(modified_822088602));
    rawEcho(makeNimstrLit("PATH \x0A"), cstrToNimstr(path_822088603));
      if ((0 < ((modified_822088602) == null ? 0 : (modified_822088602).length))) Temporary30 = true; else {        Temporary30 = (0 < ((path_822088603) == null ? 0 : (path_822088603).length));      }    if (Temporary30) {
    mainWindow_1442840599[0].webContents.send(("CODETRACER::acp-render-diff"), (innerHEX60gensym315_822088629()));
    }

    }

    if ((updateKind_822087973 == "tool_call_update")) {
++excHandler;
    try {
    var path_822088698 = "";
    if (updateObj_822087968.hasOwnProperty("rawInput")) {
    var rawIn_822088699 = updateObj_822087968["rawInput"];
    if (rawIn_822088699.hasOwnProperty("filepath")) {
    path_822088698 = (rawIn_822088699["filepath"]);
    }

    }

    if (((((path_822088698) == null ? 0 : (path_822088698).length) == 0) && updateObj_822087968.hasOwnProperty("content"))) {
++excHandler;
    try {
    var contentItems_822088708 = (updateObj_822087968["content"]);
    Label33: do {
      var item_822088712 = null;
      var i_822088889 = 0;
      var L_822088890 = (contentItems_822088708).length;
      Label34: do {
          Label35: while (true) {
          if (!(i_822088889 < L_822088890)) break Label35;
            item_822088712 = contentItems_822088708[chckIndx(i_822088889, 0, (contentItems_822088708).length - 1)];
              if (!item_822088712.hasOwnProperty("type")) Temporary37 = false; else {                Temporary37 = ((item_822088712["type"]) == "diff");              }              if (!Temporary37) Temporary36 = false; else {                Temporary36 = item_822088712.hasOwnProperty("path");              }            if (Temporary36) {
            path_822088698 = (item_822088712["path"]);
            break Label33;
            }

            i_822088889 = addInt(i_822088889, 1);
            if (!(((contentItems_822088708).length == L_822088890))) {
            failedAssertImpl_218103864(makeNimstrLit("iterators.nim:240:11 `len(a) == L` the length of the seq changed while iterating over it"));
            }

          }
      } while (false);
    } while (false);
--excHandler;
} catch (EXCEPTION) {
 var prevJSError = lastJSError;
 lastJSError = EXCEPTION;
 --excHandler;
    var contentObj_822088721 = updateObj_822087968["content"];
    if (contentObj_822088721.hasOwnProperty("path")) {
    path_822088698 = (contentObj_822088721["path"]);
    }

    lastJSError = prevJSError;
    } finally {
    }
    }

    if (((((path_822088698) == null ? 0 : (path_822088698).length) == 0) && updateObj_822087968.hasOwnProperty("rawOutput"))) {
    var rawOut_822088726 = updateObj_822087968["rawOutput"];
    if ((rawOut_822088726.hasOwnProperty("filediff") && rawOut_822088726["filediff"].hasOwnProperty("file"))) {
    path_822088698 = (rawOut_822088726["filediff"]["file"]);
    }

    }

    if ((0 < ((path_822088698) == null ? 0 : (path_822088698).length))) {
    mainWindow_1442840599[0].webContents.send(("CODETRACER::reload-file"), (innerHEX60gensym335_822088743()));
    mainWindow_1442840599[0].webContents.send(("CODETRACER::change-file"), (innerHEX60gensym349_822088779()));
    }

--excHandler;
} catch (EXCEPTION) {
 var prevJSError = lastJSError;
 lastJSError = EXCEPTION;
 --excHandler;
    if ((LOG_LEVEL_1392509023 <= 3)) {
    var iHEX60gensym354_822088808 = {Field0: makeNimstrLit("acp_ipc.nim"), Field1: 337, Field2: 64};
    Label38: do {
      var fmtRes_822088813 = [mnewString(0)];
      fmtRes_822088813[0].push.apply(fmtRes_822088813[0], makeNimstrLit("[acp_ipc] tool_call_update reload/change-file notify failed: "));;
      formatValue_1174405282(fmtRes_822088813, 0, getCurrentExceptionMsg_33556532(), []);
    } while (false);
    rawEcho(makeNimstrLit("ERROR [ct]("), (iHEX60gensym354_822088808.Field0 || []).concat(makeNimstrLit(":") || [],HEX24_352321539(iHEX60gensym354_822088808.Field1) || []), makeNimstrLit("):"), cstrToNimstr(toJSStr(fmtRes_822088813[0])));
    }

    lastJSError = prevJSError;
    } finally {
    }
    }

    }

    }

--excHandler;
} catch (EXCEPTION) {
 var prevJSError = lastJSError;
 lastJSError = EXCEPTION;
 --excHandler;
    if ((LOG_LEVEL_1392509023 <= 3)) {
    var iHEX60gensym356_822088819 = {Field0: makeNimstrLit("acp_ipc.nim"), Field1: 337, Field2: 64};
    Label39: do {
      var fmtRes_822088824 = [mnewString(0)];
      fmtRes_822088824[0].push.apply(fmtRes_822088824[0], makeNimstrLit("[acp_ipc] failed to process session update: "));;
      formatValue_1174405282(fmtRes_822088824, 0, getCurrentExceptionMsg_33556532(), []);
    } while (false);
    rawEcho(makeNimstrLit("ERROR [ct]("), (iHEX60gensym356_822088819.Field0 || []).concat(makeNimstrLit(":") || [],HEX24_352321539(iHEX60gensym356_822088819.Field1) || []), makeNimstrLit("):"), cstrToNimstr(toJSStr(fmtRes_822088824[0])));
    }

    lastJSError = prevJSError;
    } finally {
    }
    saveSessionState_822084191(acpSessionId_822087924, state_822087926[0]);
    result_822087914 = undefined;
    break BeforeRet;
  } while (false);

  return result_822087914;

}
var handleCreateTerminal_822087596 = HEX3Aanonymous_822087428;
var handleReadTextFile_822087682 = HEX3Aanonymous_822087600;
var handleWriteTextFile_822087808 = HEX3Aanonymous_822087686;
var handleRequestPermission_822087909 = HEX3Aanonymous_822087812;
var handleSessionUpdate_822088839 = HEX3Aanonymous_822087911;
